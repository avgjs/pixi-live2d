{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bcb24511b442cea33eb4","webpack:///./src/index.js","webpack:///./src/lib/live2d.js","webpack:///./src/lib/LAppModel.js","webpack:///./src/lib/Live2DFramework.js","webpack:///./src/lib/netUtils.js","webpack:///./src/lib/MatrixStack.js","webpack:///./src/lib/glMatrix-mat4.js","webpack:///./src/lib/glMatrix-common.js","webpack:///./src/lib/ModelSettingJson.js","webpack:///external \"pixi.js\""],"names":["PIXI","require","Live2DSprite","modelDefine","options","interactive","platform","window","navigator","toLowerCase","fullOptions","Object","assign","priorityForce","priorityDefault","debugLog","debugMouseLog","eyeBlink","lipSyncWithSound","randomMotion","defaultMotionGroup","audioPlayer","init","model","gl","canvas","dragMgr","viewMatrix","projMatrix","deviceToScreen","texture","modelReady","onModelReady","width","height","RenderTexture","create","canvasWidth","canvasHeight","ratio","left","right","bottom","top","setMaxScreenRect","setScreenRect","multScale","multTranslate","setGL","x","y","anchor","scale","clearColor","load","reset","loadIdentity","update","setDrag","getX","getY","multMatrix","getArray","push","draw","pop","renderer","view","activeTexture","TEXTURE0","length","func","shift","visible","useVAO","createVao","bindVao","_activeVao","flush","arrayBuffer","getParameter","ARRAY_BUFFER_BINDING","elementArrayBuffer","ELEMENT_ARRAY_BUFFER_BINDING","currentProgram","CURRENT_PROGRAM","ACTIVE_TEXTURE","texture0","TEXTURE_BINDING_2D","TEXTURE1","texture1","frontFace","FRONT_FACE","colorWhiteMask","COLOR_WRITEMASK","vertexAttr0Enabled","vertexAttr1Enabled","vertexAttr2Enabled","vertexAttr3Enabled","getVertexAttrib","VERTEX_ATTRIB_ARRAY_ENABLED","scissorTestEnabled","isEnabled","SCISSOR_TEST","stencilTestEnabled","STENCIL_TEST","depthTestEnabled","DEPTH_TEST","cullFaceEnabled","CULL_FACE","blendEnabled","BLEND","_activeTextureLocation","_activeTexture","_activeRenderTarget","vao","bindRenderTexture","clear","COLOR_BUFFER_BIT","CW","bindTexture","TEXTURE_2D","useProgram","bindRenderTarget","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","colorMask","enableVertexAttribArray","disableVertexAttribArray","enable","disable","unbind","destroy","release","args","point","hitTest","cx","cy","adjustScale","shiftX","shiftY","adjustTranslate","value","setLipSync","setLipSyncValue","setRandomExpression","name","priority","startRandomMotion","startRandomMotionOnce","stopRandomMotion","no","startMotion","filename","host","playSound","id","invertTransformX","transformX","invertTransformY","transformY","setPoint","key","getLive2DModel","getParamFloat","weight","setParamFloat","addToParamFloat","multParamFloat","Sprite","console","error","UtSystem","UtDebug","LDTransform","LDGL","Live2D","Live2DModelWebGL","Live2DModelJS","Live2DMotion","MotionQueueManager","PhysicsHair","AMotion","PartsDataID","DrawDataID","BaseDataID","ParamID","LAppModel","prototype","constructor","call","randomMotionGroup","randomMotionPriority","modelHomeDir","modelSetting","tmpMatrix","audioElement","audioContext","audioAnalyser","callback","setUpdating","setInitialized","thisRef","path","getModelFile","loadModelData","i","getTextureNum","texPaths","getTextureFile","loadTexture","isTexLoaded","getExpressionNum","expressions","j","expName","getExpressionName","expFilePath","getExpressionFile","loadExpression","expressionManager","getPhysicsFile","loadPhysics","physics","getPoseFile","loadPose","pose","updateParam","live2DModel","getLayout","layout","modelMatrix","setWidth","setHeight","setX","setY","centerX","centerY","getInitParamNum","getInitParamID","getInitParamValue","getInitPartsVisibleNum","setPartsOpacity","getInitPartsVisibleID","getInitPartsVisibleValue","saveParam","preloadMotionGroup","mainMotionManager","stopAllMotions","getMotionNum","file","getMotionFile","loadMotion","motion","setFadeIn","getMotionFadeIn","setFadeOut","getMotionFadeOut","timeMSec","getUserTimeMSec","startTimeMSec","timeSec","t","Math","PI","isFinished","loadParam","dragX","dragY","lipSync","lipSyncValue","tmp","parseInt","random","setExpression","max","motionName","warn","setReservePriority","reserveMotion","log","motions","mtn","setFadeInFadeOut","getMotionSound","startMotionPrio","soundName","audio","document","createElement","src","AudioContext","webkitAudioContext","context","audioElementSource","createMediaElementSource","source","analyser","createAnalyser","fftSize","bufferLength","frequencyBinCount","cache","lastTime","Date","now","intervalId","setInterval","dataArray","Uint8Array","getByteFrequencyData","lipValue","reduce","previous","current","addEventListener","clearInterval","connect","destination","play","getMatrix","setMatrix","testX","testY","len","getHitAreaNum","hit","drawID","getHitAreaID","hitTestSimple","getHitAreaName","L2DBaseModel","L2DExpressionMotion","L2DExpressionParam","L2DEyeBlink","L2DMatrix44","L2DModelMatrix","L2DMotionManager","L2DPhysics","L2DPose","L2DPartsParam","L2DTargetPoint","L2DViewMatrix","debugMode","initialized","updating","alpha","accAlpha","accelX","accelY","accelZ","texCounter","getModelMatrix","setAlpha","a","getAlpha","isInitialized","v","isUpdating","setAccel","z","getMainMotionManager","getExpressionManager","buf","loadModel","_err","getError","getCanvasWidth","getCanvasHeight","setCenterPosition","_loadTexture","loadedImage","Image","onload","createTexture","isPremultipliedAlpha","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_FLIP_Y_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","generateMipmap","setTexture","onerror","json","loadJson","e","drawIndex","getDrawDataIndex","points","getTransformedPoints","tx","ty","paramList","Array","EXPRESSION_DEFAULT","TYPE_SET","TYPE_ADD","TYPE_MULT","ret","fade_in","fade_out","params","paramNum","param","paramID","toString","parseFloat","val","calcTypeInt","calc","defaultValue","def","item","type","updateParamExe","motionQueueEnt","nextBlinkTime","stateStartTime","blinkIntervalMsec","eyeState","EYE_STATE","STATE_FIRST","closingMotionMsec","closedMotionMsec","openingMotionMsec","closeIfZero","eyeID_L","eyeID_R","calcNextBlink","time","r","setEyeMotion","eyeParamValue","STATE_CLOSING","STATE_CLOSED","STATE_OPENING","STATE_INTERVAL","tr","Float32Array","identity","mul","b","dst","c","n","k","getCopyMatrix","getScaleX","getScaleY","tr1","translate","translateX","translateY","scaleX","scaleY","w","h","setPosition","currentPriority","reservePriority","super","getCurrentPriority","getReservePriority","updated","physicsList","physics_hair","setup","resist","regist","mass","srcList","srcNum","Src","SRC_TO_X","typeStr","ptype","SRC_TO_Y","SRC_TO_G_ANGLE","addSrcParam","targetList","targets","targetNum","target","Target","TARGET_FROM_ANGLE","TARGET_FROM_ANGLE_V","addTargetParam","lastModel","partsGroups","poseListInfo","parts_visible","poseNum","i_pose","poseInfo","idListInfo","group","idNum","partsGroup","i_group","partsInfo","parts","link","linkListInfo","linkNum","i_link","linkParts","initParam","curTime","deltaTimeSec","normalizePartsOpacityGroup","copyOpacityOtherParts","initIndex","partsIndex","paramIndex","visibleParts","visibleOpacity","CLEAR_TIME_SEC","phi","maxBackOpacity","getPartsOpacity","opacity","a1","backOp","partsParam","getParamIndex","getPartsDataIndex","getID","EPSILON","faceTargetX","faceTargetY","faceX","faceY","faceVX","faceVY","lastTimeSec","FRAME_RATE","TIME_TO_MAX_SPEED","FACE_PARAM_MAX_V","MAX_V","curTimeSec","deltaTimeWeight","FRAME_TO_MAX_SPEED","MAX_A","dx","dy","abs","d","sqrt","vx","vy","ax","ay","max_v","cur_v","screenLeft","screenRight","screenTop","screenBottom","maxLeft","maxRight","maxTop","maxBottom","Number","MAX_VALUE","min","getMaxScale","getMinScale","setMaxScale","setMinScale","isMaxScale","isMinScale","tr2","tr3","getScreenLeft","getScreenRight","getScreenBottom","getScreenTop","getMaxLeft","getMaxRight","getMaxBottom","getMaxTop","loadBytes","request","XMLHttpRequest","open","responseType","status","response","send","mat4","MatrixStack","matrixStack","depth","currentMatrix","myError","matNew","multiply","glMatrix","scalar","SIMD","out","ARRAY_TYPE","clone","copy","fromValues","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","set","transpose","a01","a02","a03","a12","a13","a23","a0","a2","a3","tmp01","tmp23","out0","out1","out2","out3","Float32x4","shuffle","store","USE_SIMD","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","row0","row1","row2","row3","tmp1","minor0","minor1","minor2","minor3","swizzle","sub","add","reciprocalApproximation","adjoint","determinant","b0","b1","b2","b3","vec","t0","rotate","rad","axis","s","b12","b20","b21","b22","sin","cos","rotateX","splat","a_1","a_2","rotateY","a_0","rotateZ","fromTranslation","fromScaling","fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","q","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","getTranslation","mat","getScaling","getRotation","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","fromQuat","yx","zx","zy","frustum","near","far","rl","tb","nf","perspective","fovy","aspect","f","tan","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","str","frob","pow","subtract","multiplyScalar","multiplyScalarAndAdd","exactEquals","equals","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","module","exports","RANDOM","ENABLE_SIMD","self","global","SIMD_AVAILABLE","setMatrixArrayType","degree","toRadian","ModelSettingJson","NAME","ID","MODEL","TEXTURES","HIT_AREAS","PHYSICS","POSE","EXPRESSIONS","MOTION_GROUPS","SOUND","FADE_IN","FADE_OUT","LAYOUT","INIT_PARAM","INIT_PARTS_VISIBLE","VALUE","FILE","NaN"],"mappings":"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","file":"pixi-live2d.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"pixi.js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"pixi.js\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"pixi.js\")) : factory(root[\"pixi.js\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bcb24511b442cea33eb4","import {\n  UtSystem,\n  UtDebug,\n  LDTransform,\n  LDGL,\n  Live2D,\n  Live2DModelWebGL,\n  Live2DModelJS,\n  Live2DMotion,\n  MotionQueueManager,\n  PhysicsHair,\n  AMotion,\n  PartsDataID,\n  DrawDataID,\n  BaseDataID,\n  ParamID\n} from '../src/lib/live2d';\nconst PIXI = require('pixi.js');\nimport LAppModel from './lib/LAppModel';\nimport { Live2DFramework, L2DTargetPoint, L2DViewMatrix, L2DMatrix44 } from './lib/Live2DFramework';\nimport MatrixStack from './lib/MatrixStack';\n\n/**\n * @class\n * @memberof PIXI\n * @param modelDefine {object} Content of {name}.model.js file\n * @param [options] {object} The optional parameters\n * @param [options.eyeBlink=true] {boolean}\n * @param [options.lipSyncWithSound=true] {boolean}\n * @param [options.debugLog=false] {boolean}\n * @param [options.debugMouseLog=false] {boolean}\n * @param [options.randomMotion=true] {boolean}\n * @param [options.defaultMotionGroup=\"idle\"] {string}\n * @param [options.priorityDefault=1] {number}\n * @param [options.priorityForce=3] {number}\n * @param [options.audioPlayer=3] {function} Custom audio player, pass (filename, rootPath) as parameters\n *\n */\nexport default class Live2DSprite extends PIXI.Sprite {\n  constructor(modelDefine, options) {\n    super();\n\n    this.interactive = true;\n\n    this.platform = window.navigator.platform.toLowerCase();\n\n    const fullOptions = Object.assign({\n      priorityForce: 3,\n      priorityDefault: 1,\n      debugLog: false,\n      debugMouseLog: false,\n      eyeBlink: true,\n      lipSyncWithSound: true,\n      randomMotion: true,\n      defaultMotionGroup: \"idle\",\n      audioPlayer: null\n    }, options);\n\n    Live2D.init();\n    this.model = new LAppModel(fullOptions);\n\n    this.gl = null;\n    this.canvas = null;\n\n    this.dragMgr = null; /*new L2DTargetPoint();*/\n    this.viewMatrix = null; /*new L2DViewMatrix();*/\n    this.projMatrix = null; /*new L2DMatrix44()*/\n    this.deviceToScreen = null; /*new L2DMatrix44();*/\n\n    this.texture = null;\n\n    this.modelReady = false;\n    this.onModelReady = [];\n    this.modelDefine = modelDefine;\n\n  }\n\n  /**\n   * @private\n   */\n  init() {\n\n\n    var width = this.canvas.width;\n    var height = this.canvas.height;\n\n    this.texture = PIXI.RenderTexture.create(width, height);\n\n    this.canvasWidth = this.canvas.width;\n    this.canvasHeight = this.canvas.height;\n\n    this.dragMgr = new L2DTargetPoint();\n\n    var ratio = height / width;\n    var left = -1;\n    var right = 1;\n    var bottom = -ratio;\n    var top = ratio;\n\n    this.viewMatrix = new L2DViewMatrix();\n    this.viewMatrix.setMaxScreenRect(-2, 2, -2, 2);\n    this.viewMatrix.setScreenRect(left, right, bottom, top);\n    // this.viewMatrix.setMaxScale(2);\n    // this.viewMatrix.setMinScale(0.5);\n    // this.viewMatrix.adjustScale(0, 0, 0.7);\n\n    this.projMatrix = new L2DMatrix44();\n    this.projMatrix.multScale(ratio, 1);  // flip for rtt\n\n    this.deviceToScreen = new L2DMatrix44();\n    this.deviceToScreen.multTranslate( -width / 2.0, -height / 2.0);\n    this.deviceToScreen.multScale(2 / width, -2 / height);\n\n    Live2D.setGL(this.gl);\n\n    this.x = width / 2;\n    this.y = height / 2;\n    this.anchor.x = 0.5;\n    this.anchor.y = 0.5;\n    this.scale.y = -1;\n\n    this.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    this.model.load(this.gl, this.modelDefine, () => {\n      this.modelReady = true;\n    });\n  }\n\n  /**\n   * @private\n   */\n  draw() {\n    MatrixStack.reset();\n    MatrixStack.loadIdentity();\n\n    this.dragMgr.update();\n    this.model.setDrag(this.dragMgr.getX(), this.dragMgr.getY());\n\n    // this.viewMatrix.adjustTranslate(-this.x / this.canvasWidth, -this.y / this.canvasHeight);\n    // this.viewMatrix.adjustScale(this.anchor.x, this.anchor.y, this.scale.x, this.scale.y);\n\n    MatrixStack.multMatrix(this.projMatrix.getArray());\n    MatrixStack.multMatrix(this.viewMatrix.getArray());\n    // MatrixStack.multMatrix(this.deviceToScreen.getArray());\n    MatrixStack.push();\n\n    this.model.update();\n    this.model.draw(this.gl);\n\n    MatrixStack.pop();\n  }\n\n  _renderWebGL(renderer) {\n    if (!this.gl) {\n      this.gl = renderer.gl;\n      this.canvas = renderer.view;\n      this.modelDefine && this.init(this.modelDefine);\n    }\n\n    if (!this.modelReady) {\n      const gl = renderer.gl;\n      // it is unreasonable how the next line works...😂\n      gl.activeTexture(gl.TEXTURE0);\n      return;\n    }\n\n    while (this.onModelReady.length) {\n      const func = this.onModelReady.shift();\n      func();\n    }\n\n    if (!this.visible) {\n      return;\n    }\n\n    const useVAO = !!(renderer.createVao && renderer.bindVao);\n\n    let _activeVao;\n    if (useVAO) {\n      _activeVao = renderer._activeVao;\n    } else {\n      renderer.flush();\n    }\n    \n    const gl = renderer.gl;\n\n    const arrayBuffer = gl.getParameter(gl.ARRAY_BUFFER_BINDING);\n    const elementArrayBuffer = gl.getParameter(gl.ELEMENT_ARRAY_BUFFER_BINDING);\n    const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);\n\n    let activeTexture;\n    if (!useVAO) {\n      activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n    }\n\n    gl.activeTexture(gl.TEXTURE0);\n    const texture0 = gl.getParameter(gl.TEXTURE_BINDING_2D);\n    gl.activeTexture(gl.TEXTURE1);\n    const texture1 = gl.getParameter(gl.TEXTURE_BINDING_2D);\n\n    const frontFace = gl.getParameter(gl.FRONT_FACE);\n    const colorWhiteMask = gl.getParameter(gl.COLOR_WRITEMASK);\n\n    let vertexAttr0Enabled, vertexAttr1Enabled, vertexAttr2Enabled, vertexAttr3Enabled;\n    if (!useVAO) {\n      vertexAttr0Enabled = gl.getVertexAttrib(0, gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n      vertexAttr1Enabled = gl.getVertexAttrib(1, gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n      vertexAttr2Enabled = gl.getVertexAttrib(2, gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n      vertexAttr3Enabled = gl.getVertexAttrib(3, gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n    }\n    const scissorTestEnabled = gl.isEnabled(gl.SCISSOR_TEST);\n    const stencilTestEnabled = gl.isEnabled(gl.STENCIL_TEST);\n    const depthTestEnabled = gl.isEnabled(gl.DEPTH_TEST);\n    const cullFaceEnabled = gl.isEnabled(gl.CULL_FACE);\n    const blendEnabled = gl.isEnabled(gl.BLEND);\n\n    const _activeTextureLocation = renderer._activeTexture ? renderer._activeTextureLocation : 0;\n    const _activeRenderTarget = renderer._activeRenderTarget;\n\n    let vao;\n    if (useVAO) {\n      vao = renderer.createVao();\n      renderer.bindVao(vao);\n    }\n    renderer.bindRenderTexture(this.texture);\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.frontFace(gl.CW);\n    this.draw();\n    if (!useVAO) {\n      renderer._activeTextureLocation = _activeTextureLocation;\n      gl.activeTexture(gl.TEXTURE0 + _activeTextureLocation);\n    }\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.useProgram(currentProgram);\n    renderer.bindRenderTarget(_activeRenderTarget);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, arrayBuffer);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementArrayBuffer);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, texture0);\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, texture1);\n\n    if (!useVAO) {\n      gl.activeTexture(activeTexture);\n    }\n    gl.frontFace(frontFace);\n    gl.colorMask(...colorWhiteMask);\n    //\n    if (!useVAO) {\n      vertexAttr0Enabled ? gl.enableVertexAttribArray(0) : gl.disableVertexAttribArray(0);\n      vertexAttr1Enabled ? gl.enableVertexAttribArray(1) : gl.disableVertexAttribArray(1);\n      vertexAttr2Enabled ? gl.enableVertexAttribArray(2) : gl.disableVertexAttribArray(2);\n      vertexAttr3Enabled ? gl.enableVertexAttribArray(3) : gl.disableVertexAttribArray(3);\n    }\n    scissorTestEnabled ? gl.enable(gl.SCISSOR_TEST) : gl.disable(gl.SCISSOR_TEST);\n    stencilTestEnabled ? gl.enable(gl.STENCIL_TEST) : gl.disable(gl.STENCIL_TEST);\n    depthTestEnabled   ? gl.enable(gl.DEPTH_TEST) : gl.disable(gl.DEPTH_TEST);\n    cullFaceEnabled    ? gl.enable(gl.CULL_FACE) : gl.disable(gl.CULL_FACE);\n    blendEnabled       ? gl.enable(gl.BLEND) : gl.disable(gl.BLEND);\n\n    if (useVAO) {\n      vao.unbind();\n      vao.destroy();\n      renderer.bindVao(_activeVao);\n    }\n\n    super._renderWebGL(renderer);\n  }\n\n  destroy(...args) {\n    this.model.release();\n    super.destroy(...args);\n  }\n\n  containsPoint(point) {\n    if (this.modelReady) {\n      return this.hitTest(null, point.x, point.y);\n    }\n    return false;\n  }\n\n  /* Live2D methods */\n\n\n  /* Transforms */\n\n  adjustScale(cx, cy, scale) {\n    this.onModelReady.push(() => {\n      this.viewMatrix.adjustScale(cx, cy, scale);\n    });\n  }\n  adjustTranslate(shiftX, shiftY) {\n    this.onModelReady.push(() => {\n      this.viewMatrix.adjustTranslate(shiftX, -shiftY);\n    });\n  }\n\n  /**\n   * specify `PARAM_MOUTH_OPEN_Y` of Live2D model.\n   * @param value {Number} between 0~1, set to `null` will disable it.\n   */\n  setLipSync(value) {\n    if (value === null) {\n      this.model.setLipSync(false);\n    } else {\n      this.model.setLipSync(true);\n      this.model.setLipSyncValue(value);\n    }\n  }\n  setRandomExpression() {\n    this.onModelReady.push(() => {\n      this.model.setRandomExpression();\n    });\n  }\n  startRandomMotion(name, priority) {\n    this.onModelReady.push(() => {\n      this.model.startRandomMotion(name, priority);\n    });\n  }\n  startRandomMotionOnce(name, priority) {\n    this.onModelReady.push(() => {\n      this.model.startRandomMotionOnce(name, priority);\n    });\n  }\n  stopRandomMotion() {\n    this.onModelReady.push(() => {\n      this.model.stopRandomMotion();\n    });\n  }\n  startMotion(name, no, priority) {\n    this.onModelReady.push(() => {\n      this.model.startMotion(name, no, priority);\n    });\n  }\n  playSound(filename, host='/') {\n    this.onModelReady.push(() => {\n      this.model.playSound(filename, host);\n    });\n  }\n\n  /* Event methods */\n  hitTest(id, x, y) {\n    return this.model.hitTest(id,\n      this.viewMatrix.invertTransformX(this.deviceToScreen.transformX(x)),\n      this.viewMatrix.invertTransformY(this.deviceToScreen.transformY(y)));\n  }\n  setViewPoint(x, y) {\n    this.dragMgr.setPoint(this.viewMatrix.invertTransformX(this.deviceToScreen.transformX(x)),\n    this.viewMatrix.invertTransformY(this.deviceToScreen.transformY(y)));\n  }\n\n\n  /* Some raw methods of Live2D */\n  getParamFloat(key) {\n    return this.model.getLive2DModel().getParamFloat(key);\n  }\n  setParamFloat(key, value, weight=1) {\n    this.model.getLive2DModel().setParamFloat(key, value, weight);\n  }\n  addToParamFloat(key, value, weight=1) {\n    this.model.getLive2DModel().addToParamFloat(key, value, weight);\n  }\n  multParamFloat(key, value, weight=1) {\n    this.model.getLive2DModel().multParamFloat(key, value, weight);\n  }\n\n}\n\nif (PIXI) {\n  PIXI.Live2DSprite = Live2DSprite;\n} else {\n  console.error('Error: Cannot find global variable `PIXI`, Live2D plguin will not be installed.');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// const log = console.log;\n// console.log = () => {};\n// const __ = require('./live2dsdk');\n// console.log = log;\n\nexport {\n  UtSystem,\n  UtDebug,\n  LDTransform,\n  LDGL,\n  Live2D,\n  Live2DModelWebGL,\n  Live2DModelJS,\n  Live2DMotion,\n  MotionQueueManager,\n  PhysicsHair,\n  AMotion,\n  PartsDataID,\n  DrawDataID,\n  BaseDataID,\n  ParamID\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/live2d.js","//============================================================\r\n//============================================================\r\n//  class LAppModel     extends L2DBaseModel\r\n//============================================================\r\n//============================================================\r\n\r\nimport { L2DBaseModel, L2DEyeBlink } from './Live2DFramework';\r\nimport MatrixStack from './MatrixStack';\r\nimport ModelSettingJson from './ModelSettingJson';\r\n\r\nexport default function LAppModel(options)\r\n{\r\n    //L2DBaseModel.apply(this, arguments);\r\n    L2DBaseModel.prototype.constructor.call(this);\r\n\r\n    this.options = options;\r\n\r\n    this.randomMotion = this.options.randomMotion;\r\n    this.randomMotionGroup = null;\r\n    this.randomMotionPriority = null;\r\n\r\n    this.modelHomeDir = \"\";\r\n    this.modelSetting = null;\r\n    this.tmpMatrix = [];\r\n\r\n    this.audioElement = null;\r\n    this.audioContext = null;\r\n    this.audioAnalyser = null;\r\n}\r\n\r\nLAppModel.prototype = new L2DBaseModel();\r\n\r\n\r\nLAppModel.prototype.load = function(gl, modelDefine, callback)\r\n{\r\n    this.setUpdating(true);\r\n    this.setInitialized(false);\r\n\r\n    this.modelHomeDir = './';\r\n\r\n    this.modelSetting = new ModelSettingJson(modelDefine);\r\n\r\n    var thisRef = this;\r\n\r\n    // this.modelSetting.loadModelSetting(modelSettingPath, function(){\r\n\r\n        var path = thisRef.modelHomeDir + thisRef.modelSetting.getModelFile();\r\n        thisRef.loadModelData(path, function(model){\r\n\r\n            for (var i = 0; i < thisRef.modelSetting.getTextureNum(); i++)\r\n            {\r\n\r\n                var texPaths = thisRef.modelHomeDir +\r\n                    thisRef.modelSetting.getTextureFile(i);\r\n\r\n                thisRef.loadTexture(gl, i, texPaths, function() {\r\n\r\n                    if( thisRef.isTexLoaded ) {\r\n\r\n                        if (thisRef.modelSetting.getExpressionNum() > 0)\r\n                        {\r\n\r\n                            thisRef.expressions = {};\r\n\r\n                            for (var j = 0; j < thisRef.modelSetting.getExpressionNum(); j++)\r\n                            {\r\n                                var expName = thisRef.modelSetting.getExpressionName(j);\r\n                                var expFilePath = thisRef.modelHomeDir +\r\n                                    thisRef.modelSetting.getExpressionFile(j);\r\n\r\n                                thisRef.loadExpression(expName, expFilePath);\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            thisRef.expressionManager = null;\r\n                            thisRef.expressions = {};\r\n                        }\r\n\r\n\r\n\r\n                        if (!thisRef.eyeBlink)\r\n                        {\r\n                            thisRef.eyeBlink = new L2DEyeBlink();\r\n                        }\r\n\r\n\r\n                        if (thisRef.modelSetting.getPhysicsFile())\r\n                        {\r\n                            thisRef.loadPhysics(thisRef.modelHomeDir +\r\n                                                thisRef.modelSetting.getPhysicsFile());\r\n                        }\r\n                        else\r\n                        {\r\n                            thisRef.physics = null;\r\n                        }\r\n\r\n\r\n\r\n                        if (thisRef.modelSetting.getPoseFile())\r\n                        {\r\n                            thisRef.loadPose(\r\n                                thisRef.modelHomeDir +\r\n                                thisRef.modelSetting.getPoseFile(),\r\n                                function() {\r\n                                    thisRef.pose.updateParam(thisRef.live2DModel);\r\n                                }\r\n                            );\r\n                        }\r\n                        else\r\n                        {\r\n                            thisRef.pose = null;\r\n                        }\r\n\r\n\r\n\r\n                        if (thisRef.modelSetting.getLayout())\r\n                        {\r\n                            var layout = thisRef.modelSetting.getLayout();\r\n                            if (layout[\"width\"] != null)\r\n                                thisRef.modelMatrix.setWidth(layout[\"width\"]);\r\n                            if (layout[\"height\"] != null)\r\n                                thisRef.modelMatrix.setHeight(layout[\"height\"]);\r\n\r\n                            if (layout[\"x\"] != null)\r\n                                thisRef.modelMatrix.setX(layout[\"x\"]);\r\n                            if (layout[\"y\"] != null)\r\n                                thisRef.modelMatrix.setY(layout[\"y\"]);\r\n                            if (layout[\"center_x\"] != null)\r\n                                thisRef.modelMatrix.centerX(layout[\"center_x\"]);\r\n                            if (layout[\"center_y\"] != null)\r\n                                thisRef.modelMatrix.centerY(layout[\"center_y\"]);\r\n                            if (layout[\"top\"] != null)\r\n                                thisRef.modelMatrix.top(layout[\"top\"]);\r\n                            if (layout[\"bottom\"] != null)\r\n                                thisRef.modelMatrix.bottom(layout[\"bottom\"]);\r\n                            if (layout[\"left\"] != null)\r\n                                thisRef.modelMatrix.left(layout[\"left\"]);\r\n                            if (layout[\"right\"] != null)\r\n                                thisRef.modelMatrix.right(layout[\"right\"]);\r\n                        }\r\n\r\n                        for (var j = 0; j < thisRef.modelSetting.getInitParamNum(); j++)\r\n                        {\r\n\r\n                            thisRef.live2DModel.setParamFloat(\r\n                                thisRef.modelSetting.getInitParamID(j),\r\n                                thisRef.modelSetting.getInitParamValue(j)\r\n                            );\r\n                        }\r\n\r\n                        for (var j = 0; j < thisRef.modelSetting.getInitPartsVisibleNum(); j++)\r\n                        {\r\n\r\n                            thisRef.live2DModel.setPartsOpacity(\r\n                                thisRef.modelSetting.getInitPartsVisibleID(j),\r\n                                thisRef.modelSetting.getInitPartsVisibleValue(j)\r\n                            );\r\n                        }\r\n\r\n\r\n\r\n                        thisRef.live2DModel.saveParam();\r\n                        // thisRef.live2DModel.setGL(gl);\r\n\r\n\r\n                        thisRef.preloadMotionGroup(thisRef.options.defaultMotionGroup);\r\n                        thisRef.mainMotionManager.stopAllMotions();\r\n\r\n                        thisRef.setUpdating(false);\r\n                        thisRef.setInitialized(true);\r\n\r\n                        if (typeof callback == \"function\") callback();\r\n\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    // });\r\n};\r\n\r\n\r\n\r\nLAppModel.prototype.release = function(gl)\r\n{\r\n    // this.live2DModel.deleteTextures();\r\n    // var pm = Live2DFramework.getPlatformManager();\r\n    //\r\n    // gl.deleteTexture(pm.texture);\r\n}\r\n\r\n\r\n\r\nLAppModel.prototype.preloadMotionGroup = function(name)\r\n{\r\n    var thisRef = this;\r\n\r\n    for (var i = 0; i < this.modelSetting.getMotionNum(name); i++)\r\n    {\r\n        var file = this.modelSetting.getMotionFile(name, i);\r\n        this.loadMotion(file, this.modelHomeDir + file, function(motion) {\r\n            motion.setFadeIn(thisRef.modelSetting.getMotionFadeIn(name, i));\r\n            motion.setFadeOut(thisRef.modelSetting.getMotionFadeOut(name, i));\r\n        });\r\n\r\n    }\r\n}\r\n\r\n\r\nLAppModel.prototype.update = function()\r\n{\r\n    // console.log(\"--> LAppModel.update()\");\r\n\r\n    if(!this.live2DModel)\r\n    {\r\n        if (this.options.debugLog) console.error(\"Failed to update.\");\r\n\r\n        return;\r\n    }\r\n\r\n    var timeMSec = UtSystem.getUserTimeMSec() - this.startTimeMSec;\r\n    var timeSec = timeMSec / 1000.0;\r\n    var t = timeSec * 2 * Math.PI;\r\n\r\n\r\n    if (this.mainMotionManager.isFinished() && this.randomMotion)\r\n    {\r\n        this.startRandomMotion(this.randomMotionGroup || this.options.defaultMotionGroup, this.randomMotionPriority || this.options.priorityDefault);\r\n    }\r\n\r\n    //-----------------------------------------------------------------\r\n\r\n\r\n    this.live2DModel.loadParam();\r\n\r\n\r\n\r\n    var update = this.mainMotionManager.updateParam(this.live2DModel);\r\n    if (!update) {\r\n\r\n        if(this.eyeBlink && this.options.eyeBlink) {\r\n            this.eyeBlink.updateParam(this.live2DModel);\r\n        }\r\n    }\r\n\r\n\r\n    this.live2DModel.saveParam();\r\n\r\n    //-----------------------------------------------------------------\r\n\r\n\r\n    if (this.expressionManager &&\r\n        this.expressions &&\r\n        !this.expressionManager.isFinished())\r\n    {\r\n        this.expressionManager.updateParam(this.live2DModel);\r\n    }\r\n\r\n\r\n\r\n    this.live2DModel.addToParamFloat(\"PARAM_ANGLE_X\", this.dragX * 30, 1);\r\n    this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Y\", this.dragY * 30, 1);\r\n    this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Z\", (this.dragX * this.dragY) * -30, 1);\r\n\r\n\r\n\r\n    this.live2DModel.addToParamFloat(\"PARAM_BODY_ANGLE_X\", this.dragX*10, 1);\r\n\r\n\r\n\r\n    this.live2DModel.addToParamFloat(\"PARAM_EYE_BALL_X\", this.dragX, 1);\r\n    this.live2DModel.addToParamFloat(\"PARAM_EYE_BALL_Y\", this.dragY, 1);\r\n\r\n\r\n\r\n    // this.live2DModel.addToParamFloat(\"PARAM_ANGLE_X\",\r\n    //                                  Number((15 * Math.sin(t / 6.5345))), 0.5);\r\n    // this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Y\",\r\n    //                                  Number((8 * Math.sin(t / 3.5345))), 0.5);\r\n    // this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Z\",\r\n    //                                  Number((10 * Math.sin(t / 5.5345))), 0.5);\r\n    // this.live2DModel.addToParamFloat(\"PARAM_BODY_ANGLE_X\",\r\n    //                                  Number((4 * Math.sin(t / 15.5345))), 0.5);\r\n    // this.live2DModel.setParamFloat(\"PARAM_BREATH\",\r\n    //                                Number((0.5 + 0.5 * Math.sin(t / 3.2345))), 1);\r\n\r\n\r\n    if (this.physics)\r\n    {\r\n        this.physics.updateParam(this.live2DModel);\r\n    }\r\n\r\n    if (this.lipSync)\r\n    {\r\n        this.live2DModel.setParamFloat(\"PARAM_MOUTH_OPEN_Y\",\r\n                                       this.lipSyncValue);\r\n    }\r\n\r\n\r\n    if( this.pose ) {\r\n        this.pose.updateParam(this.live2DModel);\r\n    }\r\n\r\n    this.live2DModel.update();\r\n};\r\n\r\n\r\n\r\nLAppModel.prototype.setRandomExpression = function()\r\n{\r\n    var tmp = [];\r\n    for (var name in this.expressions)\r\n    {\r\n        tmp.push(name);\r\n    }\r\n\r\n    var no = parseInt(Math.random() * tmp.length);\r\n\r\n    this.setExpression(tmp[no]);\r\n}\r\n\r\n\r\n\r\nLAppModel.prototype.startRandomMotion = function(name, priority)\r\n{\r\n    var max = this.modelSetting.getMotionNum(name);\r\n    var no = parseInt(Math.random() * max);\r\n    this.startMotion(name, no, priority);\r\n    this.randomMotion = true;\r\n    this.randomMotionGroup = name;\r\n    this.randomMotionPriority = priority;\r\n}\r\nLAppModel.prototype.startRandomMotionOnce = function(name, priority)\r\n{\r\n    var max = this.modelSetting.getMotionNum(name);\r\n    var no = parseInt(Math.random() * max);\r\n    this.startMotion(name, no, priority);\r\n}\r\n\r\nLAppModel.prototype.stopRandomMotion = function()\r\n{\r\n    this.randomMotion = false;\r\n    this.randomMotionGroup = null;\r\n    this.randomMotionPriority = null;\r\n}\r\n\r\n\r\n\r\nLAppModel.prototype.startMotion = function(name, no, priority)\r\n{\r\n    // console.log(\"startMotion : \" + name + \" \" + no + \" \" + priority);\r\n\r\n    var motionName = this.modelSetting.getMotionFile(name, no);\r\n\r\n    if (motionName == null || motionName == \"\")\r\n    {\r\n        if (this.options.debugLog)\r\n            console.warn(\"Failed to motion.\");\r\n        return;\r\n    }\r\n\r\n    if (priority == this.options.priorityForce)\r\n    {\r\n        this.mainMotionManager.setReservePriority(priority);\r\n    }\r\n    else if (!this.mainMotionManager.reserveMotion(priority))\r\n    {\r\n        if (this.options.debugLog)\r\n            console.log(\"Motion is running.\")\r\n        return;\r\n    }\r\n\r\n    var thisRef = this;\r\n    var motion;\r\n\r\n    if (this.motions[name] == null)\r\n    {\r\n        this.loadMotion(null, this.modelHomeDir + motionName, function(mtn) {\r\n            motion = mtn;\r\n\r\n\r\n            thisRef.setFadeInFadeOut(name, no, priority, motion);\r\n\r\n        });\r\n    }\r\n    else\r\n    {\r\n        motion = this.motions[name];\r\n\r\n\r\n        thisRef.setFadeInFadeOut(name, no, priority, motion);\r\n    }\r\n}\r\n\r\n\r\nLAppModel.prototype.setFadeInFadeOut = function(name, no, priority, motion)\r\n{\r\n    var motionName = this.modelSetting.getMotionFile(name, no);\r\n\r\n    motion.setFadeIn(this.modelSetting.getMotionFadeIn(name, no));\r\n    motion.setFadeOut(this.modelSetting.getMotionFadeOut(name, no));\r\n\r\n\r\n    if (this.options.debugLog)\r\n            console.log(\"Start motion : \" + motionName);\r\n\r\n    if (this.modelSetting.getMotionSound(name, no) == null)\r\n    {\r\n        this.mainMotionManager.startMotionPrio(motion, priority);\r\n    }\r\n    else\r\n    {\r\n        var soundName = this.modelSetting.getMotionSound(name, no);\r\n        // var player = new Sound(this.modelHomeDir + soundName);\r\n\r\n        if (this.options.debugLog)\r\n            console.log(\"Start sound : \" + soundName);\r\n\r\n        this.playSound(soundName, this.modelHomeDir);\r\n\r\n        this.mainMotionManager.startMotionPrio(motion, priority);\r\n    }\r\n}\r\n\r\nLAppModel.prototype.playSound = function(filename, host)\r\n{\r\n    if (this.options.audioPlayer) {\r\n        this.options.audioPlayer(filename, host);\r\n    } else {\r\n        const audio = this.audioElement || document.createElement(\"audio\");\r\n        !this.audioElement && (this.audioElement = audio);\r\n        audio.src = host + filename;\r\n\r\n        const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n        if (AudioContext && this.options.lipSyncWithSound) {\r\n            const context = this.audioContext || new AudioContext();\r\n            if (!this.audioContext) {\r\n                this.audioContext = context;\r\n                this.audioElementSource = context.createMediaElementSource(audio);\r\n            }\r\n            const source = this.audioElementSource;\r\n            const analyser = this.audioAnalyser || context.createAnalyser();\r\n            !this.audioAnalyser && (this.audioAnalyser = analyser);\r\n\r\n            analyser.fftSize = 32;\r\n            var bufferLength = analyser.frequencyBinCount;\r\n            let cache = [];\r\n            let lastTime = Date.now();\r\n            const intervalId = setInterval(() => {\r\n                const dataArray = new Uint8Array(bufferLength);\r\n                analyser.getByteFrequencyData(dataArray);\r\n                const value = (dataArray[9] + dataArray[10] + dataArray[11]) / 3;\r\n                if (Date.now() - lastTime  < 33) {\r\n                    cache.push(value);\r\n                } else {\r\n                    const lipValue = cache.length ?\r\n                    (cache.reduce((previous, current) => current += previous) / cache.length / 100)\r\n                    : this.lipSyncValue;\r\n                    this.lipSync = true;\r\n                    this.lipSyncValue = lipValue;\r\n                    lastTime = Date.now();\r\n                    cache = [];\r\n                }\r\n            }, 0);\r\n            audio.addEventListener('ended', () => {\r\n                clearInterval(intervalId);\r\n                this.lipSyncValue = 0;\r\n            });\r\n            source.connect(analyser);\r\n            analyser.connect(context.destination);\r\n        }\r\n        audio.play();\r\n    }\r\n}\r\n\r\n\r\nLAppModel.prototype.setExpression = function(name)\r\n{\r\n    var motion = this.expressions[name];\r\n\r\n    if (this.options.debugLog)\r\n        console.log(\"Expression : \" + name);\r\n\r\n    this.expressionManager.startMotion(motion, false);\r\n}\r\n\r\n\r\n\r\nLAppModel.prototype.draw = function(gl)\r\n{\r\n    //console.log(\"--> LAppModel.draw()\");\r\n\r\n    // if(this.live2DModel == null) return;\r\n\r\n\r\n    MatrixStack.push();\r\n\r\n    MatrixStack.multMatrix(this.modelMatrix.getArray());\r\n\r\n    this.tmpMatrix = MatrixStack.getMatrix()\r\n    this.live2DModel.setMatrix(this.tmpMatrix);\r\n    this.live2DModel.draw();\r\n\r\n    MatrixStack.pop();\r\n\r\n};\r\n\r\n\r\n\r\nLAppModel.prototype.hitTest = function(id, testX, testY)\r\n{\r\n    var len = this.modelSetting.getHitAreaNum();\r\n    let hit = false;\r\n    for (var i = 0; i < len; i++)\r\n    {\r\n        // NOTE: id == null means to test all ids.\r\n        if (id == null) {\r\n            var drawID = this.modelSetting.getHitAreaID(i);\r\n            hit = this.hitTestSimple(drawID, testX, testY);\r\n            if (hit) {\r\n                return hit;\r\n            }\r\n        } else if (id == this.modelSetting.getHitAreaName(i)) {\r\n            var drawID = this.modelSetting.getHitAreaID(i);\r\n\r\n            return this.hitTestSimple(drawID, testX, testY);\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/LAppModel.js","/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n import {\r\n   UtSystem,\r\n   UtDebug,\r\n   LDTransform,\r\n   LDGL,\r\n   Live2D,\r\n   Live2DModelWebGL,\r\n   Live2DModelJS,\r\n   Live2DMotion,\r\n   MotionQueueManager,\r\n   PhysicsHair,\r\n   AMotion,\r\n   PartsDataID,\r\n   DrawDataID,\r\n   BaseDataID,\r\n   ParamID\r\n} from './live2d';\r\nimport { loadBytes } from './netUtils';\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DBaseModel\r\n//============================================================\r\n//============================================================\r\nexport function L2DBaseModel()\r\n{\r\n    this.live2DModel     = null; // ALive2DModel\r\n    this.modelMatrix     = null; // L2DModelMatrix\r\n    this.eyeBlink        = null; // L2DEyeBlink\r\n    this.physics         = null; // L2DPhysics\r\n    this.pose            = null; // L2DPose\r\n    this.debugMode       = false;\r\n    this.initialized     = false;\r\n    this.updating        = false;\r\n    this.alpha           = 1;\r\n    this.accAlpha        = 0;\r\n    this.lipSync         = false;\r\n    this.lipSyncValue    = 0;\r\n    this.accelX          = 0;\r\n    this.accelY          = 0;\r\n    this.accelZ          = 0;\r\n    this.dragX           = 0;\r\n    this.dragY           = 0;\r\n    this.startTimeMSec   = null;\r\n    this.mainMotionManager = new L2DMotionManager(); //L2DMotionManager\r\n    this.expressionManager = new L2DMotionManager(); //L2DMotionManager\r\n    this.motions = {};\r\n    this.expressions = {};\r\n\r\n    this.isTexLoaded = false;\r\n}\r\n\r\nvar texCounter = 0;\r\n\r\n//============================================================\r\n//    L2DBaseModel # getModelMatrix()\r\n//============================================================\r\nL2DBaseModel.prototype.getModelMatrix  = function()\r\n{\r\n    return this.modelMatrix;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setAlpha()\r\n//============================================================\r\nL2DBaseModel.prototype.setAlpha        = function(a/*float*/)\r\n{\r\n    if( a > 0.999 ) a = 1;\r\n    if( a < 0.001 ) a = 0;\r\n    this.alpha = a;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getAlpha()\r\n//============================================================\r\nL2DBaseModel.prototype.getAlpha        = function()\r\n{\r\n    return this.alpha;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # isInitialized()\r\n//============================================================\r\nL2DBaseModel.prototype.isInitialized   = function()\r\n{\r\n    return this.initialized;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setInitialized()\r\n//============================================================\r\nL2DBaseModel.prototype.setInitialized  = function( v/*boolean*/)\r\n{\r\n    this.initialized = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # isUpdating()\r\n//============================================================\r\nL2DBaseModel.prototype.isUpdating      = function()\r\n{\r\n    return this.updating;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setUpdating()\r\n//============================================================\r\nL2DBaseModel.prototype.setUpdating     = function(v/*boolean*/)\r\n{\r\n    this.updating = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getLive2DModel()\r\n//============================================================\r\nL2DBaseModel.prototype.getLive2DModel  = function()\r\n{\r\n    return this.live2DModel;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setLipSync()\r\n//============================================================\r\nL2DBaseModel.prototype.setLipSync      = function(v/*boolean*/)\r\n{\r\n    this.lipSync = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setLipSyncValue()\r\n//============================================================\r\nL2DBaseModel.prototype.setLipSyncValue = function(v/*float*/)\r\n{\r\n    this.lipSyncValue = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setAccel()\r\n//============================================================\r\nL2DBaseModel.prototype.setAccel        = function(x/*float*/, y/*float*/, z/*float*/)\r\n{\r\n    this.accelX = x;\r\n    this.accelY = y;\r\n    this.accelZ = z;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setDrag()\r\n//============================================================\r\nL2DBaseModel.prototype.setDrag         = function(x/*float*/, y/*float*/)\r\n{\r\n    this.dragX = x;\r\n    this.dragY = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getMainMotionManager()\r\n//============================================================\r\nL2DBaseModel.prototype.getMainMotionManager = function()\r\n{\r\n    return this.mainMotionManager;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getExpressionManager()\r\n//============================================================\r\nL2DBaseModel.prototype.getExpressionManager = function()\r\n{\r\n    return this.expressionManager;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadModelData()\r\n//============================================================\r\nL2DBaseModel.prototype.loadModelData   = function(path/*String*/, callback)\r\n{\r\n    /*\r\n    if( this.live2DModel != null ) {\r\n        this.live2DModel.deleteTextures();\r\n    }\r\n    */\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n    if( this.debugMode ) console.log(\"Load model : \" + path);\r\n\r\n    var thisRef = this;\r\n    loadBytes(path, 'arraybuffer', function(buf) {\r\n        thisRef.live2DModel = Live2DModelWebGL.loadModel(buf);\r\n        thisRef.live2DModel.saveParam();\r\n\r\n        var _err = Live2D.getError();\r\n\r\n        if( _err != 0 ) {\r\n            console.error(\"Error : Failed to loadModelData().\");\r\n            return;\r\n        }\r\n\r\n        thisRef.modelMatrix = new L2DModelMatrix(\r\n            thisRef.live2DModel.getCanvasWidth(),\r\n            thisRef.live2DModel.getCanvasHeight()); //L2DModelMatrix\r\n        thisRef.modelMatrix.setWidth(2);\r\n        thisRef.modelMatrix.setCenterPosition(0, 0);\r\n\r\n        callback(thisRef.live2DModel);\r\n    });\r\n}\r\n\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadTexture()\r\n//============================================================\r\nL2DBaseModel.prototype.loadTexture     = function(gl, no/*int*/, path/*String*/, callback)\r\n{\r\n    texCounter++;\r\n\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n\r\n    if( this.debugMode ) console.log(\"Load Texture : \" + path);\r\n\r\n    var thisRef = this;\r\n    this._loadTexture(gl, this.live2DModel , no , path, function(){\r\n        texCounter--;\r\n        if(texCounter == 0) thisRef.isTexLoaded = true;\r\n        if (typeof callback == \"function\") callback();\r\n    });\r\n\r\n}\r\n\r\nL2DBaseModel.prototype._loadTexture = function(gl, model, no, path, callback) {\r\n// load textures\r\nvar loadedImage = new Image();\r\nloadedImage.src = path;\r\n\r\nvar thisRef = this;\r\nloadedImage.onload = () => {\r\n\r\n    // create texture\r\n   //  var canvas = document.getElementById(\"glcanvas\");\r\n    // var gl = getWebGLContext(canvas, {premultipliedAlpha : true});\r\n    var texture = gl.createTexture();\r\n    if (!texture){ console.error(\"Failed to generate gl texture name.\"); return -1; }\r\n\r\n    if(model.isPremultipliedAlpha() == false){\r\n        // 乗算済アルファテクスチャ以外の場合\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\r\n    }\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA,\r\n                  gl.UNSIGNED_BYTE, loadedImage);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\r\n    gl.generateMipmap(gl.TEXTURE_2D);\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 0);\r\n\r\n    model.setTexture(no, texture);\r\n\r\n    if (typeof callback == \"function\") callback();\r\n};\r\n\r\nloadedImage.onerror = function() {\r\n    console.error(\"Failed to load image : \" + path);\r\n}\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadMotion()\r\n//============================================================\r\nL2DBaseModel.prototype.loadMotion      = function(name/*String*/, path /*String*/, callback)\r\n{\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n\r\n    if(this.debugMode) console.log(\"Load Motion : \" + path);\r\n\r\n    var motion = null; //Live2DMotion\r\n\r\n    var thisRef = this;\r\n    loadBytes(path, 'arraybuffer', function(buf) {\r\n        motion = Live2DMotion.loadMotion(buf);\r\n        if( name != null ) {\r\n            thisRef.motions[name] = motion;\r\n        }\r\n        callback(motion);\r\n    });\r\n\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadExpression()\r\n//============================================================\r\nL2DBaseModel.prototype.loadExpression  = function(name/*String*/, path /*String*/, callback)\r\n{\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n\r\n    if( this.debugMode ) console.log(\"Load Expression : \" + path);\r\n\r\n    var thisRef = this;\r\n    loadBytes(path, 'json', function(json) {\r\n        if(name != null) {\r\n            thisRef.expressions[name] = L2DExpressionMotion.loadJson(json);\r\n        }\r\n        if (typeof callback == \"function\") callback();\r\n    });\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadPose()\r\n//============================================================\r\nL2DBaseModel.prototype.loadPose = function( path /*String*/, callback )\r\n{\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n    if( this.debugMode ) console.log(\"Load Pose : \" + path);\r\n    var thisRef = this;\r\n    try {\r\n        loadBytes(path, 'json', function(json) {\r\n            thisRef.pose = L2DPose.load(json);\r\n            if (typeof callback == \"function\") callback();\r\n        });\r\n    }\r\n    catch(e) {\r\n        console.warn(e);\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadPhysics()\r\n//============================================================\r\nL2DBaseModel.prototype.loadPhysics     = function(path/*String*/)\r\n{\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n    if( this.debugMode ) console.log(\"Load Physics : \" + path);\r\n    var thisRef = this;\r\n    try {\r\n        loadBytes(path, 'json', function(json) {\r\n            thisRef.physics = L2DPhysics.load(json);\r\n        });\r\n    }\r\n    catch(e){\r\n        console.warn(e);\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # hitTestSimple()\r\n//============================================================\r\nL2DBaseModel.prototype.hitTestSimple = function(drawID, testX, testY)\r\n{\r\n    var drawIndex = this.live2DModel.getDrawDataIndex(drawID);\r\n\r\n    if( drawIndex < 0 ) return false;\r\n\r\n    var points = this.live2DModel.getTransformedPoints(drawIndex);\r\n    var left = this.live2DModel.getCanvasWidth();\r\n    var right = 0;\r\n    var top = this.live2DModel.getCanvasHeight();\r\n    var bottom = 0;\r\n\r\n    for( var j = 0; j < points.length; j = j + 2 ) {\r\n        var x = points[j];\r\n        var y = points[j + 1];\r\n\r\n        if( x < left ) left = x;\r\n        if( x > right ) right = x;\r\n        if( y < top ) top = y;\r\n        if( y > bottom ) bottom = y;\r\n    }\r\n    var tx = this.modelMatrix.invertTransformX(testX);\r\n    var ty = this.modelMatrix.invertTransformY(testY);\r\n   //  console.log(left << 0, right << 0, tx << 0)\r\n   //  console.log(bottom << 0, top << 0, ty << 0)\r\n    return ( left <= tx && tx <= right && top <= ty && ty <= bottom );\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DExpressionMotion  extends     AMotion\r\n//============================================================\r\n//============================================================\r\nexport function L2DExpressionMotion()\r\n{\r\n    AMotion.prototype.constructor.call(this);\r\n    this.paramList = new Array(); //ArrayList<L2DExpressionParam>\r\n}\r\n\r\nL2DExpressionMotion.prototype = new AMotion(); // L2DExpressionMotion extends AMotion\r\n\r\n//============================================================\r\nL2DExpressionMotion.EXPRESSION_DEFAULT  = \"DEFAULT\";\r\nL2DExpressionMotion.TYPE_SET            = 0;\r\nL2DExpressionMotion.TYPE_ADD            = 1;\r\nL2DExpressionMotion.TYPE_MULT           = 2;\r\n\r\n//============================================================\r\n//    static L2DExpressionMotion.loadJson()\r\n//============================================================\r\nL2DExpressionMotion.loadJson        = function(json)\r\n{\r\n    var ret = new L2DExpressionMotion();\r\n\r\n    // var pm = Live2DFramework.getPlatformManager();\r\n   //  var json = jsonParseFromBytes(buf);\r\n\r\n    ret.setFadeIn(parseInt(json.fade_in) > 0 ? parseInt(json.fade_in) : 1000);\r\n    ret.setFadeOut(parseInt(json.fade_out) > 0 ? parseInt(json.fade_out) : 1000);\r\n\r\n    if(json.params == null) {\r\n        return ret;\r\n    }\r\n\r\n    var params = json.params;\r\n    var paramNum = params.length;\r\n    ret.paramList = []; //ArrayList<L2DExpressionParam>\r\n    for( var i = 0; i < paramNum; i++) {\r\n        var param = params[i];\r\n        var paramID = param.id.toString();\r\n        var value = parseFloat(param.val);\r\n        var calcTypeInt = L2DExpressionMotion.TYPE_ADD;\r\n        var calc = param.calc != null ? param.calc.toString() : \"add\";\r\n        if(calc === \"add\") {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_ADD;\r\n        }\r\n        else if(calc === \"mult\") {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_MULT;\r\n        }\r\n        else if(calc === \"set\") {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_SET;\r\n        }\r\n        else {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_ADD;\r\n        }\r\n        if(calcTypeInt == L2DExpressionMotion.TYPE_ADD) {\r\n            var defaultValue = param.def == null ? 0 : parseFloat(param.def);\r\n            value = value - defaultValue;\r\n        }\r\n        else if(calcTypeInt == L2DExpressionMotion.TYPE_MULT) {\r\n            var defaultValue = param.def == null ? 1 : parseFloat(param.def);\r\n            if(defaultValue == 0 ) defaultValue = 1;\r\n            value = value / defaultValue;\r\n        }\r\n\r\n        var item = new L2DExpressionParam(  );\r\n        item.id = paramID;\r\n        item.type = calcTypeInt;\r\n        item.value = value;\r\n\r\n        ret.paramList.push(item);\r\n    }\r\n\r\n     return ret;\r\n}\r\n\r\n\r\n//============================================================\r\n//    L2DExpressionMotion # updateParamExe()\r\n//============================================================\r\nL2DExpressionMotion.prototype.updateParamExe  = function(model /*ALive2DModel*/, timeMSec/*long*/ ,weight /*float*/ ,motionQueueEnt /*MotionQueueEnt*/)\r\n{\r\n    for(var i = this.paramList.length - 1; i >= 0; --i) {\r\n        var param = this.paramList[i]; //L2DExpressionParam\r\n        // if (!param || !param.type) continue;\r\n        if(param.type == L2DExpressionMotion.TYPE_ADD) {\r\n            model.addToParamFloat(param.id, param.value, weight);\r\n        }\r\n        else if(param.type == L2DExpressionMotion.TYPE_MULT) {\r\n            model.multParamFloat(param.id, param.value, weight);\r\n        }\r\n        else if(param.type == L2DExpressionMotion.TYPE_SET) {\r\n            model.setParamFloat(param.id, param.value, weight);\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DExpressionParam\r\n//============================================================\r\n//============================================================\r\nexport function L2DExpressionParam()\r\n{\r\n    this.id              = \"\";\r\n    this.type            = -1;\r\n    this.value           = null;\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DEyeBlink\r\n//============================================================\r\n//============================================================\r\nexport function L2DEyeBlink()\r\n{\r\n    this.nextBlinkTime   = null /* TODO NOT INIT */; //\r\n    this.stateStartTime  = null /* TODO NOT INIT */; //\r\n    this.blinkIntervalMsec = null /* TODO NOT INIT */; //\r\n    this.eyeState = EYE_STATE.STATE_FIRST;\r\n    this.blinkIntervalMsec = 4000;\r\n    this.closingMotionMsec = 100;\r\n    this.closedMotionMsec = 50;\r\n    this.openingMotionMsec = 150;\r\n    this.closeIfZero = true;\r\n    this.eyeID_L = \"PARAM_EYE_L_OPEN\";\r\n    this.eyeID_R = \"PARAM_EYE_R_OPEN\";\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # calcNextBlink()\r\n//============================================================\r\nL2DEyeBlink.prototype.calcNextBlink   = function()\r\n{\r\n    var time /*long*/ = UtSystem.getUserTimeMSec();\r\n    var r /*Number*/ = Math.random();\r\n    return  /*(long)*/ (time + r * (2 * this.blinkIntervalMsec - 1));\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # setInterval()\r\n//============================================================\r\nL2DEyeBlink.prototype.setInterval     = function(blinkIntervalMsec /*int*/)\r\n{\r\n    this.blinkIntervalMsec = blinkIntervalMsec;\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # setEyeMotion()\r\n//============================================================\r\nL2DEyeBlink.prototype.setEyeMotion    = function(closingMotionMsec/*int*/ , closedMotionMsec/*int*/ , openingMotionMsec/*int*/)\r\n{\r\n    this.closingMotionMsec = closingMotionMsec;\r\n    this.closedMotionMsec = closedMotionMsec;\r\n    this.openingMotionMsec = openingMotionMsec;\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # updateParam()\r\n//============================================================\r\nL2DEyeBlink.prototype.updateParam     = function(model/*ALive2DModel*/)\r\n{\r\n    var time /*:long*/ = UtSystem.getUserTimeMSec();\r\n    var eyeParamValue /*:Number*/;\r\n    var t /*:Number*/ = 0;\r\n    switch(this.eyeState){\r\n    case EYE_STATE.STATE_CLOSING:\r\n        t = (time - this.stateStartTime) / this.closingMotionMsec;\r\n        if(t >= 1) {\r\n            t = 1;\r\n            this.eyeState = EYE_STATE.STATE_CLOSED;\r\n            this.stateStartTime = time;\r\n        }\r\n        eyeParamValue = 1 - t;\r\n        break;\r\n    case EYE_STATE.STATE_CLOSED:\r\n        t = (time - this.stateStartTime) / this.closedMotionMsec;\r\n        if(t >= 1) {\r\n            this.eyeState = EYE_STATE.STATE_OPENING;\r\n            this.stateStartTime = time;\r\n        }\r\n        eyeParamValue = 0;\r\n        break;\r\n    case EYE_STATE.STATE_OPENING:\r\n        t = (time - this.stateStartTime) / this.openingMotionMsec;\r\n        if(t >= 1) {\r\n            t = 1;\r\n            this.eyeState = EYE_STATE.STATE_INTERVAL;\r\n            this.nextBlinkTime = this.calcNextBlink();\r\n        }\r\n        eyeParamValue = t;\r\n        break;\r\n    case EYE_STATE.STATE_INTERVAL:\r\n        if(this.nextBlinkTime < time) {\r\n            this.eyeState = EYE_STATE.STATE_CLOSING;\r\n            this.stateStartTime = time;\r\n        }\r\n        eyeParamValue = 1;\r\n        break;\r\n    case EYE_STATE.STATE_FIRST:\r\n    default:\r\n        this.eyeState = EYE_STATE.STATE_INTERVAL;\r\n        this.nextBlinkTime = this.calcNextBlink();\r\n        eyeParamValue = 1;\r\n        break;\r\n    }\r\n    if(!this.closeIfZero) eyeParamValue = -eyeParamValue;\r\n    model.setParamFloat(this.eyeID_L , eyeParamValue);\r\n    model.setParamFloat(this.eyeID_R , eyeParamValue);\r\n}\r\n\r\n//== enum EYE_STATE ==\r\nvar EYE_STATE = function(){};\r\n\r\nEYE_STATE.STATE_FIRST          = \"STATE_FIRST\"\r\nEYE_STATE.STATE_INTERVAL       = \"STATE_INTERVAL\"\r\nEYE_STATE.STATE_CLOSING        = \"STATE_CLOSING\"\r\nEYE_STATE.STATE_CLOSED         = \"STATE_CLOSED\"\r\nEYE_STATE.STATE_OPENING        = \"STATE_OPENING\"\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DMatrix44\r\n//============================================================\r\n//============================================================\r\nexport function L2DMatrix44()\r\n{\r\n    this.tr              = new Float32Array(16); //\r\n    this.identity();\r\n}\r\n\r\n//============================================================\r\n//    static L2DMatrix44.mul()\r\n//============================================================\r\nL2DMatrix44.mul             = function( a/*float[]*/, b/*float[]*/, dst/*float[]*/ )\r\n{\r\n    var c = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n    var n = 4;\r\n    var i, j, k;\r\n    for( i = 0; i < n; i++ ) {\r\n        for( j = 0; j < n; j++ ) {\r\n            for( k = 0; k < n; k++ ) {\r\n                c[i + j * 4] += a[i + k * 4] * b[k + j * 4];\r\n            }\r\n        }\r\n    }\r\n    for( i = 0; i < 16; i++ ) {\r\n        dst[i] = c[i];\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # identity()\r\n//============================================================\r\nL2DMatrix44.prototype.identity        = function()\r\n{\r\n    for( var i/*:int*/ = 0; i < 16; i++ )\r\n        this.tr[i] = ( ( i % 5 ) == 0 ) ? 1 : 0;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getArray()\r\n//============================================================\r\nL2DMatrix44.prototype.getArray        = function()\r\n{\r\n    return this.tr;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getCopyMatrix()\r\n//============================================================\r\nL2DMatrix44.prototype.getCopyMatrix   = function()\r\n{\r\n    return new Float32Array(this.tr); // this.tr.clone();\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # setMatrix()\r\n//============================================================\r\nL2DMatrix44.prototype.setMatrix       = function( tr/*float[]*/ )\r\n{\r\n    if( this.tr == null || this.tr.length != this.tr.length ) return ;\r\n    for( var i/*:int*/ = 0; i < 16; i++ ) this.tr[i] = tr[i];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getScaleX()\r\n//============================================================\r\nL2DMatrix44.prototype.getScaleX       = function()\r\n{\r\n    return this.tr[0];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getScaleY()\r\n//============================================================\r\nL2DMatrix44.prototype.getScaleY       = function()\r\n{\r\n    return this.tr[5];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # transformX()\r\n//============================================================\r\nL2DMatrix44.prototype.transformX      = function( src/*float*/ )\r\n{\r\n    return this.tr[0] * src + this.tr[12];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # transformY()\r\n//============================================================\r\nL2DMatrix44.prototype.transformY      = function( src/*float*/ )\r\n{\r\n    return this.tr[5] * src + this.tr[13];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # invertTransformX()\r\n//============================================================\r\nL2DMatrix44.prototype.invertTransformX = function( src/*float*/ )\r\n{\r\n    return ( src - this.tr[12] ) / this.tr[0];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # invertTransformY()\r\n//============================================================\r\nL2DMatrix44.prototype.invertTransformY = function( src/*float*/ )\r\n{\r\n    return ( src - this.tr[13] ) / this.tr[5];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # multTranslate()\r\n//============================================================\r\nL2DMatrix44.prototype.multTranslate   = function( shiftX/*float*/, shiftY/*float*/ )\r\n{\r\n    var tr1 = [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, shiftX, shiftY, 0, 1 ];\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # translate()\r\n//============================================================\r\nL2DMatrix44.prototype.translate       = function( x/*float*/, y/*float*/ )\r\n{\r\n    this.tr[12] = x;\r\n    this.tr[13] = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # translateX()\r\n//============================================================\r\nL2DMatrix44.prototype.translateX      = function( x/*float*/ )\r\n{\r\n    this.tr[12] = x;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # translateY()\r\n//============================================================\r\nL2DMatrix44.prototype.translateY      = function( y/*float*/ )\r\n{\r\n    this.tr[13] = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # multScale()\r\n//============================================================\r\nL2DMatrix44.prototype.multScale       = function( scaleX/*float*/, scaleY/*float*/ )\r\n{\r\n    var tr1 = [scaleX, 0, 0, 0, 0, scaleY, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # scale()\r\n//============================================================\r\nL2DMatrix44.prototype.scale           = function( scaleX/*float*/, scaleY/*float*/ )\r\n{\r\n    this.tr[0] = scaleX;\r\n    this.tr[5] = scaleY;\r\n}\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DModelMatrix       extends     L2DMatrix44\r\n//============================================================\r\n//============================================================\r\nexport function L2DModelMatrix(w/*float*/, h/*float*/){\r\n    L2DMatrix44.prototype.constructor.call(this);\r\n    this.width = w;\r\n    this.height = h;\r\n}\r\n\r\n//L2DModelMatrix extends L2DMatrix44\r\nL2DModelMatrix.prototype = new L2DMatrix44();\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setPosition()\r\n//============================================================\r\nL2DModelMatrix.prototype.setPosition     = function(x/*float*/, y/*float*/)\r\n{\r\n    this.translate(x, y);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setCenterPosition()\r\n//============================================================\r\nL2DModelMatrix.prototype.setCenterPosition = function(x/*float*/, y/*float*/)\r\n{\r\n    var w = this.width * this.getScaleX();\r\n    var h = this.height * this.getScaleY();\r\n    this.translate(x - w / 2, y - h / 2);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # top()\r\n//============================================================\r\nL2DModelMatrix.prototype.top             = function(y/*float*/)\r\n{\r\n    this.setY(y);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # bottom()\r\n//============================================================\r\nL2DModelMatrix.prototype.bottom          = function(y/*float*/)\r\n{\r\n    var h = this.height * this.getScaleY();\r\n    this.translateY(y - h);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # left()\r\n//============================================================\r\nL2DModelMatrix.prototype.left            = function(x/*float*/)\r\n{\r\n    this.setX(x);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # right()\r\n//============================================================\r\nL2DModelMatrix.prototype.right           = function(x/*float*/)\r\n{\r\n    var w = this.width * this.getScaleX();\r\n    this.translateX(x - w);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # centerX()\r\n//============================================================\r\nL2DModelMatrix.prototype.centerX         = function(x/*float*/)\r\n{\r\n    var w = this.width * this.getScaleX();\r\n    this.translateX(x - w / 2);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # centerY()\r\n//============================================================\r\nL2DModelMatrix.prototype.centerY         = function(y/*float*/)\r\n{\r\n    var h = this.height * this.getScaleY();\r\n    this.translateY(y - h / 2);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setX()\r\n//============================================================\r\nL2DModelMatrix.prototype.setX            = function(x/*float*/)\r\n{\r\n    this.translateX(x);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setY()\r\n//============================================================\r\nL2DModelMatrix.prototype.setY            = function(y/*float*/)\r\n{\r\n    this.translateY(y);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setHeight()\r\n//============================================================\r\nL2DModelMatrix.prototype.setHeight       = function(h/*float*/)\r\n{\r\n    var scaleX = h / this.height;\r\n    var scaleY = -scaleX;\r\n    this.scale(scaleX, scaleY);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setWidth()\r\n//============================================================\r\nL2DModelMatrix.prototype.setWidth        = function(w/*float*/)\r\n{\r\n    var scaleX = w / this.width;\r\n    var scaleY = -scaleX;\r\n    this.scale(scaleX, scaleY);\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DMotionManager     extends     MotionQueueManager\r\n//============================================================\r\n//============================================================\r\nexport function L2DMotionManager()\r\n{\r\n    MotionQueueManager.prototype.constructor.call(this);\r\n    this.currentPriority = null;\r\n    this.reservePriority = null;\r\n\r\n    this.super = MotionQueueManager.prototype;\r\n}\r\n\r\n\r\nL2DMotionManager.prototype = new MotionQueueManager();\r\n\r\n//============================================================\r\n//    L2DMotionManager # getCurrentPriority()\r\n//============================================================\r\nL2DMotionManager.prototype.getCurrentPriority = function()\r\n{\r\n    return this.currentPriority;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # getReservePriority()\r\n//============================================================\r\nL2DMotionManager.prototype.getReservePriority = function()\r\n{\r\n    return this.reservePriority;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # reserveMotion()\r\n//============================================================\r\nL2DMotionManager.prototype.reserveMotion   = function(priority/*int*/)\r\n{\r\n    if(this.reservePriority >= priority) {\r\n        return false;\r\n    }\r\n    if(this.currentPriority >= priority) {\r\n        return false;\r\n    }\r\n\r\n    this.reservePriority = priority;\r\n\r\n    return true;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # setReservePriority()\r\n//============================================================\r\nL2DMotionManager.prototype.setReservePriority = function(val/*int*/)\r\n{\r\n    this.reservePriority = val;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # updateParam()\r\n//============================================================\r\nL2DMotionManager.prototype.updateParam     = function(model/*ALive2DModel*/)\r\n{\r\n    var updated = MotionQueueManager.prototype.updateParam.call(this, model);\r\n\r\n    if(this.isFinished()) {\r\n        this.currentPriority = 0;\r\n    }\r\n\r\n    return updated;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # startMotionPrio()\r\n//============================================================\r\nL2DMotionManager.prototype.startMotionPrio = function(motion/*AMotion*/, priority/*int*/)\r\n{\r\n    if(priority == this.reservePriority) {\r\n        this.reservePriority = 0;\r\n    }\r\n    this.currentPriority = priority;\r\n    return this.startMotion(motion, false);\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DPhysics\r\n//============================================================\r\n//============================================================\r\nexport function L2DPhysics()\r\n{\r\n    this.physicsList = new Array(); //ArrayList<PhysicsHair>\r\n    this.startTimeMSec = UtSystem.getUserTimeMSec();\r\n}\r\n\r\n//============================================================\r\n//    static L2DPhysics.load()\r\n//============================================================\r\nL2DPhysics.load            = function(json)\r\n{\r\n    var ret = new L2DPhysics(); //L2DPhysicsL2DPhysics\r\n    // var pm = Live2DFramework.getPlatformManager();\r\n   //  var json = jsonParseFromBytes(buf);\r\n    var params = json.physics_hair;\r\n    var paramNum = params.length;\r\n    for(var i = 0; i < paramNum; i++) {\r\n        var param = params[i]; //Value\r\n        var physics = new PhysicsHair(); //PhysicsHairPhysicsHair\r\n        var setup = param.setup; //Value\r\n        var length = parseFloat(setup.length);\r\n        var resist = parseFloat(setup.regist);\r\n        var mass = parseFloat(setup.mass);\r\n        physics.setup(length, resist, mass);\r\n        var srcList = param.src; //Value\r\n        var srcNum = srcList.length;\r\n        for(var j = 0; j < srcNum; j++) {\r\n            var src = srcList[j]; //Value\r\n            var id = src.id; //String\r\n            var type = PhysicsHair.Src.SRC_TO_X;\r\n            var typeStr = src.ptype; //String\r\n            if(typeStr === \"x\") {\r\n                type = PhysicsHair.Src.SRC_TO_X;\r\n            }\r\n            else if(typeStr === \"y\") {\r\n                type = PhysicsHair.Src.SRC_TO_Y;\r\n            }\r\n            else if(typeStr === \"angle\") {\r\n                type = PhysicsHair.Src.SRC_TO_G_ANGLE;\r\n            }\r\n            else {\r\n                UtDebug.error(\"live2d\", \"Invalid parameter:PhysicsHair.Src\");\r\n            }\r\n            var scale = parseFloat(src.scale);\r\n            var weight = parseFloat(src.weight);\r\n            physics.addSrcParam(type, id, scale, weight);\r\n        }\r\n        var targetList = param.targets; //Value\r\n        var targetNum = targetList.length;\r\n        for(var j = 0; j < targetNum; j++) {\r\n            var target = targetList[j]; //Value\r\n            var id = target.id; //String\r\n            var type = PhysicsHair.Target.TARGET_FROM_ANGLE;\r\n            var typeStr = target.ptype; //String\r\n            if(typeStr === \"angle\") {\r\n                type = PhysicsHair.Target.TARGET_FROM_ANGLE;\r\n            }\r\n            else if(typeStr === \"angle_v\") {\r\n                type = PhysicsHair.Target.TARGET_FROM_ANGLE_V;\r\n            }\r\n            else {\r\n                UtDebug.error(\"live2d\", \"Invalid parameter:PhysicsHair.Target\");\r\n            }\r\n            var scale = parseFloat(target.scale);\r\n            var weight = parseFloat(target.weight);\r\n            physics.addTargetParam(type, id, scale, weight);\r\n        }\r\n        ret.physicsList.push(physics);\r\n    }\r\n    return ret;\r\n}\r\n\r\n//============================================================\r\n//    L2DPhysics # updateParam()\r\n//============================================================\r\nL2DPhysics.prototype.updateParam     = function(model/*ALive2DModel*/)\r\n{\r\n    var timeMSec = UtSystem.getUserTimeMSec() - this.startTimeMSec;\r\n    for(var i = 0; i < this.physicsList.length; i++) {\r\n        this.physicsList[i].update(model, timeMSec);\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DPose\r\n//============================================================\r\n//============================================================\r\nexport function L2DPose()\r\n{\r\n    this.lastTime        = 0;\r\n    this.lastModel       = null; //ALive2DModel\r\n    this.partsGroups = new Array(); //ArrayList<L2DPartsParam[]>\r\n}\r\n\r\n\r\n//============================================================\r\n//    static L2DPose.load()\r\n//============================================================\r\nL2DPose.load            = function(json)\r\n{\r\n    var ret = new L2DPose(); //L2DPose\r\n    // var pm = Live2DFramework.getPlatformManager();\r\n   //  var json = jsonParseFromBytes(buf);\r\n    var poseListInfo = json.parts_visible; //Value\r\n    var poseNum = poseListInfo.length;\r\n    for(var i_pose = 0; i_pose < poseNum; i_pose++) {\r\n        var poseInfo = poseListInfo[i_pose]; //Value\r\n        var idListInfo = poseInfo.group; //Value\r\n        var idNum = idListInfo.length;\r\n        var partsGroup/*L2DPartsParam*/ = new Array();\r\n        for(var i_group = 0; i_group < idNum; i_group++) {\r\n            var partsInfo = idListInfo[i_group]; //Value\r\n            var parts = new L2DPartsParam(partsInfo.id); //L2DPartsParamL2DPartsParam\r\n            partsGroup[i_group] = parts;\r\n            if(partsInfo.link == null) continue;\r\n            var linkListInfo = partsInfo.link; //Value\r\n            var linkNum = linkListInfo.length;\r\n            parts.link = new Array(); //ArrayList<L2DPartsParam>\r\n            for(var i_link = 0; i_link < linkNum; i_link++) {\r\n                var linkParts = new L2DPartsParam(linkListInfo[i_link]); //L2DPartsParamL2DPartsParam\r\n                parts.link.push(linkParts);\r\n            }\r\n        }\r\n        ret.partsGroups.push(partsGroup);\r\n    }\r\n\r\n    return ret;\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # updateParam()\r\n//============================================================\r\nL2DPose.prototype.updateParam     = function(model/*ALive2DModel*/)\r\n{\r\n    if(model == null) return ;\r\n\r\n    if(!(model == this.lastModel)) {\r\n        this.initParam(model);\r\n    }\r\n    this.lastModel = model;\r\n\r\n    var curTime = UtSystem.getUserTimeMSec();\r\n    var deltaTimeSec = ((this.lastTime == 0) ? 0 : (curTime - this.lastTime) / 1000.0);\r\n    this.lastTime = curTime;\r\n    if(deltaTimeSec < 0) deltaTimeSec = 0;\r\n    for(var i = 0; i < this.partsGroups.length; i++) {\r\n        this.normalizePartsOpacityGroup(model, this.partsGroups[i], deltaTimeSec);\r\n        this.copyOpacityOtherParts(model, this.partsGroups[i]);\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # initParam()\r\n//============================================================\r\nL2DPose.prototype.initParam       = function(model/*ALive2DModel*/)\r\n{\r\n    if(model == null) return ;\r\n    for(var i = 0; i < this.partsGroups.length; i++) {\r\n        var partsGroup = this.partsGroups[i]; //L2DPartsParam\r\n        for(var j = 0; j < partsGroup.length; j++) {\r\n            partsGroup[j].initIndex(model);\r\n            var partsIndex = partsGroup[j].partsIndex;\r\n            var paramIndex = partsGroup[j].paramIndex;\r\n            if(partsIndex < 0) continue;\r\n            var v/*:Boolean*/ = (model.getParamFloat(paramIndex) != 0);\r\n            model.setPartsOpacity(partsIndex, (v ? 1.0 : 0.0));\r\n            model.setParamFloat(paramIndex, (v ? 1.0 : 0.0));\r\n            if(partsGroup[j].link == null) continue;\r\n            for(var k = 0; k < partsGroup[j].link.length; k++) {\r\n                partsGroup[j].link[k].initIndex(model);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # normalizePartsOpacityGroup()\r\n//============================================================\r\nL2DPose.prototype.normalizePartsOpacityGroup = function(model/*ALive2DModel*/, partsGroup/*L2DPartsParam[]*/, deltaTimeSec/*float*/)\r\n{\r\n    var visibleParts = -1;\r\n    var visibleOpacity = 1.0;\r\n    var CLEAR_TIME_SEC = 0.5;\r\n    var phi = 0.5;\r\n    var maxBackOpacity = 0.15;\r\n    for(var i = 0; i < partsGroup.length; i++) {\r\n        var partsIndex = partsGroup[i].partsIndex;\r\n        var paramIndex = partsGroup[i].paramIndex;\r\n        if(partsIndex < 0) continue;if(model.getParamFloat(paramIndex) != 0) {\r\n            if(visibleParts >= 0) {\r\n                break;\r\n            }\r\n            visibleParts = i;\r\n            visibleOpacity = model.getPartsOpacity(partsIndex);\r\n            visibleOpacity += deltaTimeSec / CLEAR_TIME_SEC;\r\n            if(visibleOpacity > 1) {\r\n                visibleOpacity = 1;\r\n            }\r\n        }\r\n    }\r\n    if(visibleParts < 0) {\r\n        visibleParts = 0;\r\n        visibleOpacity = 1;\r\n    }\r\n    for(var i = 0; i < partsGroup.length; i++) {\r\n        var partsIndex = partsGroup[i].partsIndex;\r\n        if(partsIndex < 0) continue;if(visibleParts == i) {\r\n            model.setPartsOpacity(partsIndex, visibleOpacity);\r\n        }\r\n        else {\r\n            var opacity = model.getPartsOpacity(partsIndex);\r\n            var a1;\r\n            if(visibleOpacity < phi) {\r\n                a1 = visibleOpacity * (phi - 1) / phi + 1;\r\n            }\r\n            else {\r\n                a1 = (1 - visibleOpacity) * phi / (1 - phi);\r\n            }\r\n            var backOp = (1 - a1) * (1 - visibleOpacity);\r\n            if(backOp > maxBackOpacity) {\r\n                a1 = 1 - maxBackOpacity / (1 - visibleOpacity);\r\n            }\r\n            if(opacity > a1) {\r\n                opacity = a1;\r\n            }\r\n            model.setPartsOpacity(partsIndex, opacity);\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # copyOpacityOtherParts()\r\n//============================================================\r\nL2DPose.prototype.copyOpacityOtherParts = function(model/*ALive2DModel*/, partsGroup/*L2DPartsParam[]*/)\r\n{\r\n    for(var i_group = 0; i_group < partsGroup.length; i_group++) {\r\n        var partsParam = partsGroup[i_group]; //L2DPartsParam\r\n        if(partsParam.link == null) continue;\r\n        if(partsParam.partsIndex < 0) continue;\r\n        var opacity = model.getPartsOpacity(partsParam.partsIndex);\r\n        for(var i_link = 0; i_link < partsParam.link.length; i_link++) {\r\n            var linkParts = partsParam.link[i_link]; //L2DPartsParam\r\n            if(linkParts.partsIndex < 0) continue;\r\n            model.setPartsOpacity(linkParts.partsIndex, opacity);\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DPartsParam\r\n//============================================================\r\n//============================================================\r\nexport function L2DPartsParam(id/*String*/){\r\n    this.paramIndex      = -1;\r\n    this.partsIndex      = -1;\r\n    this.link            = null; // ArrayList<L2DPartsParam>\r\n    this.id = id;\r\n}\r\n\r\n//============================================================\r\n//    L2DPartsParam # initIndex()\r\n//============================================================\r\nL2DPartsParam.prototype.initIndex       = function(model/*ALive2DModel*/)\r\n{\r\n    this.paramIndex = model.getParamIndex(\"VISIBLE:\" + this.id);\r\n    this.partsIndex = model.getPartsDataIndex(PartsDataID.getID(this.id));\r\n    model.setParamFloat(this.paramIndex, 1);\r\n}\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DTargetPoint\r\n//============================================================\r\n//============================================================\r\nexport function L2DTargetPoint()\r\n{\r\n    this.EPSILON         = 0.01; // 変化の最小値（この値以下は無視される）\r\n    this.faceTargetX     = 0;\r\n    this.faceTargetY     = 0;\r\n    this.faceX           = 0;\r\n    this.faceY           = 0;\r\n    this.faceVX          = 0;\r\n    this.faceVY          = 0;\r\n    this.lastTimeSec     = 0;\r\n}\r\n\r\n//============================================================\r\nL2DTargetPoint.FRAME_RATE  = 30;\r\n\r\n//============================================================\r\n//    L2DTargetPoint # set()\r\n//============================================================\r\nL2DTargetPoint.prototype.setPoint = function(x/*float*/, y/*float*/)\r\n{\r\n    this.faceTargetX = x;\r\n    this.faceTargetY = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DTargetPoint # getX()\r\n//============================================================\r\nL2DTargetPoint.prototype.getX            = function()\r\n{\r\n    return this.faceX;\r\n}\r\n\r\n//============================================================\r\n//    L2DTargetPoint # getY()\r\n//============================================================\r\nL2DTargetPoint.prototype.getY            = function()\r\n{\r\n    return this.faceY;\r\n}\r\n\r\n//============================================================\r\n//    L2DTargetPoint # update()\r\n//============================================================\r\nL2DTargetPoint.prototype.update          = function()\r\n{\r\n   var TIME_TO_MAX_SPEED = 0.15;\r\n   var FACE_PARAM_MAX_V = 40.0 / 7.5;\r\n   var MAX_V = FACE_PARAM_MAX_V / L2DTargetPoint.FRAME_RATE;\r\n    if(this.lastTimeSec == 0) {\r\n        this.lastTimeSec = UtSystem.getUserTimeMSec();\r\n        return;\r\n    }\r\n    var curTimeSec = UtSystem.getUserTimeMSec();\r\n    var deltaTimeWeight = (curTimeSec - this.lastTimeSec) * L2DTargetPoint.FRAME_RATE / 1000.0;\r\n    this.lastTimeSec = curTimeSec;\r\n   var FRAME_TO_MAX_SPEED = TIME_TO_MAX_SPEED * L2DTargetPoint.FRAME_RATE;\r\n   var MAX_A = deltaTimeWeight * MAX_V / FRAME_TO_MAX_SPEED;\r\n    var dx = (this.faceTargetX - this.faceX);\r\n    var dy = (this.faceTargetY - this.faceY);\r\n    // if(dx == 0 && dy == 0) return;\r\n    if( Math.abs(dx) <= this.EPSILON && Math.abs(dy) <= this.EPSILON ) return;\r\n    var d = Math.sqrt(dx * dx + dy * dy);\r\n    var vx = MAX_V * dx / d;\r\n    var vy = MAX_V * dy / d;\r\n    var ax = vx - this.faceVX;\r\n    var ay = vy - this.faceVY;\r\n    var a =  Math.sqrt(ax * ax + ay * ay);\r\n    if(a < -MAX_A || a > MAX_A) {\r\n        ax *= MAX_A / a;\r\n        ay *= MAX_A / a;\r\n        a = MAX_A;\r\n    }\r\n    this.faceVX += ax;\r\n    this.faceVY += ay;\r\n    {\r\n        var max_v = 0.5 * ( Math.sqrt(MAX_A * MAX_A + 16 * MAX_A * d - 8 * MAX_A * d) - MAX_A);\r\n        var cur_v =  Math.sqrt(this.faceVX * this.faceVX + this.faceVY * this.faceVY);\r\n        if(cur_v > max_v) {\r\n            this.faceVX *= max_v / cur_v;\r\n            this.faceVY *= max_v / cur_v;\r\n        }\r\n    }\r\n    this.faceX += this.faceVX;\r\n    this.faceY += this.faceVY;\r\n}\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DViewMatrix        extends     L2DMatrix44\r\n//============================================================\r\n//============================================================\r\nexport function L2DViewMatrix()\r\n{\r\n    L2DMatrix44.prototype.constructor.call(this);\r\n    this.screenLeft      = null;\r\n    this.screenRight     = null;\r\n    this.screenTop       = null;\r\n    this.screenBottom    = null;\r\n    this.maxLeft         = null;\r\n    this.maxRight        = null;\r\n    this.maxTop          = null;\r\n    this.maxBottom       = null;\r\n    this.max = Number.MAX_VALUE;\r\n    this.min = 0;\r\n}\r\n\r\nL2DViewMatrix.prototype = new L2DMatrix44(); //L2DViewMatrix extends L2DMatrix44\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxScale     = function()\r\n{\r\n    return this.max;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMinScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMinScale     = function()\r\n{\r\n    return this.min;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setMaxScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.setMaxScale     = function(v/*float*/)\r\n{\r\n    this.max = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setMinScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.setMinScale     = function(v/*float*/)\r\n{\r\n    this.min = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # isMaxScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.isMaxScale      = function()\r\n{\r\n    return this.getScaleX() == this.max;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # isMinScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.isMinScale      = function()\r\n{\r\n    return this.getScaleX() == this.min;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # adjustTranslate()\r\n//============================================================\r\nL2DViewMatrix.prototype.adjustTranslate = function(shiftX/*float*/, shiftY/*float*/)\r\n{\r\n   // comment them, for don't know their function\r\n   //\r\n   //  if(this.tr[0] * this.maxLeft + (this.tr[12] + shiftX) > this.screenLeft)\r\n   //      shiftX = this.screenLeft - this.tr[0] * this.maxLeft - this.tr[12];\r\n   //  if(this.tr[0] * this.maxRight + (this.tr[12] + shiftX) < this.screenRight)\r\n   //      shiftX = this.screenRight - this.tr[0] * this.maxRight - this.tr[12];\r\n   //  if(this.tr[5] * this.maxTop + (this.tr[13] + shiftY) < this.screenTop)\r\n   //      shiftY = this.screenTop - this.tr[5] * this.maxTop - this.tr[13];\r\n   //  if(this.tr[5] * this.maxBottom + (this.tr[13] + shiftY) > this.screenBottom)\r\n   //      shiftY = this.screenBottom - this.tr[5] * this.maxBottom - this.tr[13];\r\n\r\n    var tr1 = [1, 0, 0, 0,\r\n               0, 1, 0, 0,\r\n               0, 0, 1, 0,\r\n               shiftX, shiftY, 0, 1 ];\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # adjustScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.adjustScale     = function(cx/*float*/, cy/*float*/, scaleX/*float*/, scaleY)\r\n{\r\n    if (!scaleY) {\r\n        scaleY = scaleX;\r\n    }\r\n   //  var targetScaleX = scaleX * this.tr[0];\r\n   //  if(targetScaleX < this.min) {\r\n   //      if(this.tr[0] > 0) scaleX = this.min / this.tr[0];\r\n   //  }\r\n   //  else if(targetScaleX > this.max) {\r\n   //      if(this.tr[0] > 0) scaleX = this.max / this.tr[0];\r\n   //  }\r\n   //  var targetScaleY = scaleY * this.tr[0];\r\n   //  if(targetScaleY < this.min) {\r\n   //      if(this.tr[0] > 0) scaleY = this.min / this.tr[0];\r\n   //  }\r\n   //  else if(targetScaleY > this.max) {\r\n   //      if(this.tr[0] > 0) scaleY = this.max / this.tr[0];\r\n   //  }\r\n    var tr1 = [1, 0, 0, 0,\r\n               0, 1, 0, 0,\r\n               0, 0, 1, 0,\r\n               cx, cy, 0, 1];\r\n    var tr2 = [scaleX, 0, 0, 0,\r\n               0, scaleY, 0, 0,\r\n               0, 0, 1, 0,\r\n               0, 0, 0, 1 ];\r\n    var tr3 = [1, 0, 0, 0,\r\n               0, 1, 0, 0,\r\n               0, 0, 1, 0,\r\n               -cx, -cy, 0, 1 ];\r\n    L2DMatrix44.mul(tr3, this.tr, this.tr);\r\n    L2DMatrix44.mul(tr2, this.tr, this.tr);\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setScreenRect()\r\n//============================================================\r\nL2DViewMatrix.prototype.setScreenRect   = function(left/*float*/, right/*float*/, bottom/*float*/, top/*float*/)\r\n{\r\n    this.screenLeft = left;\r\n    this.screenRight = right;\r\n    this.screenTop = top;\r\n    this.screenBottom = bottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setMaxScreenRect()\r\n//============================================================\r\nL2DViewMatrix.prototype.setMaxScreenRect = function(left/*float*/, right/*float*/, bottom/*float*/, top/*float*/)\r\n{\r\n    this.maxLeft = left;\r\n    this.maxRight = right;\r\n    this.maxTop = top;\r\n    this.maxBottom = bottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenLeft()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenLeft   = function()\r\n{\r\n    return this.screenLeft;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenRight()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenRight  = function()\r\n{\r\n    return this.screenRight;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenBottom()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenBottom = function()\r\n{\r\n    return this.screenBottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenTop()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenTop    = function()\r\n{\r\n    return this.screenTop;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxLeft()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxLeft      = function()\r\n{\r\n    return this.maxLeft;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxRight()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxRight     = function()\r\n{\r\n    return this.maxRight;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxBottom()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxBottom    = function()\r\n{\r\n    return this.maxBottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxTop()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxTop       = function()\r\n{\r\n    return this.maxTop;\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class Live2DFramework\r\n//============================================================\r\n//============================================================\r\n// export function Live2DFramework()\r\n// {\r\n// }\r\n//\r\n// //============================================================\r\n// Live2DFramework.platformManager  = null;\r\n//\r\n// //============================================================\r\n// //    static Live2DFramework.getPlatformManager()\r\n// //============================================================\r\n// Live2DFramework.getPlatformManager = function()\r\n// {\r\n//     return Live2DFramework.platformManager;\r\n// }\r\n//\r\n// //============================================================\r\n// //    static Live2DFramework.setPlatformManager()\r\n// //============================================================\r\n// Live2DFramework.setPlatformManager = function( platformManager /*IPlatformManager*/ )\r\n// {\r\n//     Live2DFramework.platformManager = platformManager;\r\n// }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Live2DFramework.js","import { Live2DModelWebGL } from '../../src/lib/live2d';\n\nexport function loadBytes(path, type, callback) {\n  var request = new XMLHttpRequest();\n  request.open('GET',path, true);\n  request.responseType = type;\n  request.onload = () => {\n    switch (request.status) {\n    case 200:\n        callback(request.response);\n        break;\n    default:\n        console.error( 'Failed to load (' + request.status + ') : ' + path );\n        break;\n    }\n  }\n  request.send(null);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/netUtils.js","/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n *  (c) Modified by Icemic <bingfeng.web@gmail.com>\r\n */\r\n\r\nconst mat4 = require('./glMatrix-mat4');\r\n\r\nconst MatrixStack = {};\r\n\r\nexport default MatrixStack;\r\n\r\n\r\nMatrixStack.matrixStack = [\r\n    1, 0, 0, 0,\r\n    0, 1, 0, 0,\r\n    0, 0, 1, 0,\r\n    0, 0, 0, 1\r\n];\r\n\r\n\r\nMatrixStack.depth = 0;\r\n\r\n\r\nMatrixStack.currentMatrix = [\r\n    1, 0, 0, 0,\r\n    0, 1, 0, 0,\r\n    0, 0, 1, 0,\r\n    0, 0, 0, 1\r\n];\r\n\r\n\r\nMatrixStack.tmp = new Array(16);\r\n\r\n\r\n\r\nMatrixStack.reset = function()\r\n{\r\n    this.depth = 0;\r\n}\r\n\r\n\r\n\r\nMatrixStack.loadIdentity = function()\r\n{\r\n    // for (var i = 0; i < 16; i++)\r\n    // {\r\n    //     this.currentMatrix[i] = (i % 5 == 0) ? 1 : 0;\r\n    // }\r\n    this.currentMatrix = [\r\n        1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1\r\n    ];\r\n}\r\n\r\n\r\n\r\nMatrixStack.push = function()\r\n{\r\n    // var offset = this.depth * 16;\r\n    // var nextOffset = (this.depth + 1) * 16;\r\n\r\n    // if (this.matrixStack.length < nextOffset + 16)\r\n    // {\r\n    //     this.matrixStack.length = nextOffset + 16;\r\n    // }\r\n\r\n    // for (var i = 0; i < 16; i++)\r\n    // {\r\n    //     this.matrixStack[nextOffset + i] = this.currentMatrix[i];\r\n    // }\r\n    this.matrixStack.push(this.currentMatrix);\r\n\r\n    this.depth++;\r\n}\r\n\r\n\r\n\r\nMatrixStack.pop = function()\r\n{\r\n    this.depth--;\r\n    if (this.depth < 0)\r\n    {\r\n        myError(\"Invalid matrix stack.\");\r\n        this.depth = 0;\r\n    }\r\n\r\n    // var offset = this.depth * 16;\r\n    // for (var i = 0; i < 16; i++)\r\n    // {\r\n    //     this.currentMatrix[i] = this.matrixStack[offset + i];\r\n    // }\r\n    this.currentMatrix = this.matrixStack.pop();\r\n}\r\n\r\n\r\n\r\nMatrixStack.getMatrix = function()\r\n{\r\n    return this.currentMatrix;\r\n}\r\n\r\n\r\n\r\nMatrixStack.multMatrix = function(matNew)\r\n{\r\n    // var i, j, k;\r\n\r\n    // for (i = 0; i < 16; i++)\r\n    // {\r\n    //     this.tmp[i] = 0;\r\n    // }\r\n\r\n    // for (i = 0; i < 4; i++)\r\n    // {\r\n    //     for (j = 0; j < 4; j++)\r\n    //     {\r\n    //         for (k = 0; k < 4; k++)\r\n    //         {\r\n    //             this.tmp[i + j * 4] += this.currentMatrix[i + k * 4] * matNew[k + j * 4];\r\n    //         }\r\n    //     }\r\n    // }\r\n    // for (i = 0; i < 16; i++)\r\n    // {\r\n    //     this.currentMatrix[i] = this.tmp[i];\r\n    // }\r\n    mat4.multiply(this.currentMatrix, this.currentMatrix, matNew);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/MatrixStack.js","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = require(\"./glMatrix-common.js\");\n\n/**\n * @class 4x4 Matrix\n * @name mat4\n */\nvar mat4 = {\n  scalar: {},\n  SIMD: {}\n};\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nmat4.create = function() {\n    var out = new glMatrix.ARRAY_TYPE(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {mat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nmat4.clone = function(a) {\n    var out = new glMatrix.ARRAY_TYPE(16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\nmat4.fromValues = function(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    var out = new glMatrix.ARRAY_TYPE(16);\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n};\n\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\nmat4.set = function(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n};\n\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nmat4.identity = function(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat4 not using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.scalar.transpose = function(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n\n    return out;\n};\n\n/**\n * Transpose the values of a mat4 using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.SIMD.transpose = function(out, a) {\n    var a0, a1, a2, a3,\n        tmp01, tmp23,\n        out0, out1, out2, out3;\n\n    a0 = SIMD.Float32x4.load(a, 0);\n    a1 = SIMD.Float32x4.load(a, 4);\n    a2 = SIMD.Float32x4.load(a, 8);\n    a3 = SIMD.Float32x4.load(a, 12);\n\n    tmp01 = SIMD.Float32x4.shuffle(a0, a1, 0, 1, 4, 5);\n    tmp23 = SIMD.Float32x4.shuffle(a2, a3, 0, 1, 4, 5);\n    out0  = SIMD.Float32x4.shuffle(tmp01, tmp23, 0, 2, 4, 6);\n    out1  = SIMD.Float32x4.shuffle(tmp01, tmp23, 1, 3, 5, 7);\n    SIMD.Float32x4.store(out, 0,  out0);\n    SIMD.Float32x4.store(out, 4,  out1);\n\n    tmp01 = SIMD.Float32x4.shuffle(a0, a1, 2, 3, 6, 7);\n    tmp23 = SIMD.Float32x4.shuffle(a2, a3, 2, 3, 6, 7);\n    out2  = SIMD.Float32x4.shuffle(tmp01, tmp23, 0, 2, 4, 6);\n    out3  = SIMD.Float32x4.shuffle(tmp01, tmp23, 1, 3, 5, 7);\n    SIMD.Float32x4.store(out, 8,  out2);\n    SIMD.Float32x4.store(out, 12, out3);\n\n    return out;\n};\n\n/**\n * Transpse a mat4 using SIMD if available and enabled\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.transpose = glMatrix.USE_SIMD ? mat4.SIMD.transpose : mat4.scalar.transpose;\n\n/**\n * Inverts a mat4 not using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.scalar.invert = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};\n\n/**\n * Inverts a mat4 using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.SIMD.invert = function(out, a) {\n  var row0, row1, row2, row3,\n      tmp1,\n      minor0, minor1, minor2, minor3,\n      det,\n      a0 = SIMD.Float32x4.load(a, 0),\n      a1 = SIMD.Float32x4.load(a, 4),\n      a2 = SIMD.Float32x4.load(a, 8),\n      a3 = SIMD.Float32x4.load(a, 12);\n\n  // Compute matrix adjugate\n  tmp1 = SIMD.Float32x4.shuffle(a0, a1, 0, 1, 4, 5);\n  row1 = SIMD.Float32x4.shuffle(a2, a3, 0, 1, 4, 5);\n  row0 = SIMD.Float32x4.shuffle(tmp1, row1, 0, 2, 4, 6);\n  row1 = SIMD.Float32x4.shuffle(row1, tmp1, 1, 3, 5, 7);\n  tmp1 = SIMD.Float32x4.shuffle(a0, a1, 2, 3, 6, 7);\n  row3 = SIMD.Float32x4.shuffle(a2, a3, 2, 3, 6, 7);\n  row2 = SIMD.Float32x4.shuffle(tmp1, row3, 0, 2, 4, 6);\n  row3 = SIMD.Float32x4.shuffle(row3, tmp1, 1, 3, 5, 7);\n\n  tmp1   = SIMD.Float32x4.mul(row2, row3);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor0 = SIMD.Float32x4.mul(row1, tmp1);\n  minor1 = SIMD.Float32x4.mul(row0, tmp1);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor0 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1, tmp1), minor0);\n  minor1 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor1);\n  minor1 = SIMD.Float32x4.swizzle(minor1, 2, 3, 0, 1);\n\n  tmp1   = SIMD.Float32x4.mul(row1, row2);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor0 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor0);\n  minor3 = SIMD.Float32x4.mul(row0, tmp1);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor0 = SIMD.Float32x4.sub(minor0, SIMD.Float32x4.mul(row3, tmp1));\n  minor3 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor3);\n  minor3 = SIMD.Float32x4.swizzle(minor3, 2, 3, 0, 1);\n\n  tmp1   = SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1, 2, 3, 0, 1), row3);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  row2   = SIMD.Float32x4.swizzle(row2, 2, 3, 0, 1);\n  minor0 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row2, tmp1), minor0);\n  minor2 = SIMD.Float32x4.mul(row0, tmp1);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor0 = SIMD.Float32x4.sub(minor0, SIMD.Float32x4.mul(row2, tmp1));\n  minor2 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor2);\n  minor2 = SIMD.Float32x4.swizzle(minor2, 2, 3, 0, 1);\n\n  tmp1   = SIMD.Float32x4.mul(row0, row1);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor2 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor2);\n  minor3 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2, tmp1), minor3);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor2 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3, tmp1), minor2);\n  minor3 = SIMD.Float32x4.sub(minor3, SIMD.Float32x4.mul(row2, tmp1));\n\n  tmp1   = SIMD.Float32x4.mul(row0, row3);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor1 = SIMD.Float32x4.sub(minor1, SIMD.Float32x4.mul(row2, tmp1));\n  minor2 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row1, tmp1), minor2);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor1 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row2, tmp1), minor1);\n  minor2 = SIMD.Float32x4.sub(minor2, SIMD.Float32x4.mul(row1, tmp1));\n\n  tmp1   = SIMD.Float32x4.mul(row0, row2);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor1 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor1);\n  minor3 = SIMD.Float32x4.sub(minor3, SIMD.Float32x4.mul(row1, tmp1));\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor1 = SIMD.Float32x4.sub(minor1, SIMD.Float32x4.mul(row3, tmp1));\n  minor3 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row1, tmp1), minor3);\n\n  // Compute matrix determinant\n  det   = SIMD.Float32x4.mul(row0, minor0);\n  det   = SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det, 2, 3, 0, 1), det);\n  det   = SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det, 1, 0, 3, 2), det);\n  tmp1  = SIMD.Float32x4.reciprocalApproximation(det);\n  det   = SIMD.Float32x4.sub(\n               SIMD.Float32x4.add(tmp1, tmp1),\n               SIMD.Float32x4.mul(det, SIMD.Float32x4.mul(tmp1, tmp1)));\n  det   = SIMD.Float32x4.swizzle(det, 0, 0, 0, 0);\n  if (!det) {\n      return null;\n  }\n\n  // Compute matrix inverse\n  SIMD.Float32x4.store(out, 0,  SIMD.Float32x4.mul(det, minor0));\n  SIMD.Float32x4.store(out, 4,  SIMD.Float32x4.mul(det, minor1));\n  SIMD.Float32x4.store(out, 8,  SIMD.Float32x4.mul(det, minor2));\n  SIMD.Float32x4.store(out, 12, SIMD.Float32x4.mul(det, minor3));\n  return out;\n}\n\n/**\n * Inverts a mat4 using SIMD if available and enabled\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.invert = glMatrix.USE_SIMD ? mat4.SIMD.invert : mat4.scalar.invert;\n\n/**\n * Calculates the adjugate of a mat4 not using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.scalar.adjoint = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    out[0]  =  (a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22));\n    out[1]  = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n    out[2]  =  (a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12));\n    out[3]  = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n    out[4]  = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n    out[5]  =  (a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22));\n    out[6]  = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n    out[7]  =  (a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12));\n    out[8]  =  (a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21));\n    out[9]  = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n    out[10] =  (a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11));\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n    out[13] =  (a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21));\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n    out[15] =  (a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11));\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat4 using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.SIMD.adjoint = function(out, a) {\n  var a0, a1, a2, a3;\n  var row0, row1, row2, row3;\n  var tmp1;\n  var minor0, minor1, minor2, minor3;\n\n  a0 = SIMD.Float32x4.load(a, 0);\n  a1 = SIMD.Float32x4.load(a, 4);\n  a2 = SIMD.Float32x4.load(a, 8);\n  a3 = SIMD.Float32x4.load(a, 12);\n\n  // Transpose the source matrix.  Sort of.  Not a true transpose operation\n  tmp1 = SIMD.Float32x4.shuffle(a0, a1, 0, 1, 4, 5);\n  row1 = SIMD.Float32x4.shuffle(a2, a3, 0, 1, 4, 5);\n  row0 = SIMD.Float32x4.shuffle(tmp1, row1, 0, 2, 4, 6);\n  row1 = SIMD.Float32x4.shuffle(row1, tmp1, 1, 3, 5, 7);\n\n  tmp1 = SIMD.Float32x4.shuffle(a0, a1, 2, 3, 6, 7);\n  row3 = SIMD.Float32x4.shuffle(a2, a3, 2, 3, 6, 7);\n  row2 = SIMD.Float32x4.shuffle(tmp1, row3, 0, 2, 4, 6);\n  row3 = SIMD.Float32x4.shuffle(row3, tmp1, 1, 3, 5, 7);\n\n  tmp1   = SIMD.Float32x4.mul(row2, row3);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor0 = SIMD.Float32x4.mul(row1, tmp1);\n  minor1 = SIMD.Float32x4.mul(row0, tmp1);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor0 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1, tmp1), minor0);\n  minor1 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor1);\n  minor1 = SIMD.Float32x4.swizzle(minor1, 2, 3, 0, 1);\n\n  tmp1   = SIMD.Float32x4.mul(row1, row2);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor0 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor0);\n  minor3 = SIMD.Float32x4.mul(row0, tmp1);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor0 = SIMD.Float32x4.sub(minor0, SIMD.Float32x4.mul(row3, tmp1));\n  minor3 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor3);\n  minor3 = SIMD.Float32x4.swizzle(minor3, 2, 3, 0, 1);\n\n  tmp1   = SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1, 2, 3, 0, 1), row3);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  row2   = SIMD.Float32x4.swizzle(row2, 2, 3, 0, 1);\n  minor0 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row2, tmp1), minor0);\n  minor2 = SIMD.Float32x4.mul(row0, tmp1);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor0 = SIMD.Float32x4.sub(minor0, SIMD.Float32x4.mul(row2, tmp1));\n  minor2 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor2);\n  minor2 = SIMD.Float32x4.swizzle(minor2, 2, 3, 0, 1);\n\n  tmp1   = SIMD.Float32x4.mul(row0, row1);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor2 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor2);\n  minor3 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2, tmp1), minor3);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor2 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3, tmp1), minor2);\n  minor3 = SIMD.Float32x4.sub(minor3, SIMD.Float32x4.mul(row2, tmp1));\n\n  tmp1   = SIMD.Float32x4.mul(row0, row3);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor1 = SIMD.Float32x4.sub(minor1, SIMD.Float32x4.mul(row2, tmp1));\n  minor2 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row1, tmp1), minor2);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor1 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row2, tmp1), minor1);\n  minor2 = SIMD.Float32x4.sub(minor2, SIMD.Float32x4.mul(row1, tmp1));\n\n  tmp1   = SIMD.Float32x4.mul(row0, row2);\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\n  minor1 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor1);\n  minor3 = SIMD.Float32x4.sub(minor3, SIMD.Float32x4.mul(row1, tmp1));\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\n  minor1 = SIMD.Float32x4.sub(minor1, SIMD.Float32x4.mul(row3, tmp1));\n  minor3 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row1, tmp1), minor3);\n\n  SIMD.Float32x4.store(out, 0,  minor0);\n  SIMD.Float32x4.store(out, 4,  minor1);\n  SIMD.Float32x4.store(out, 8,  minor2);\n  SIMD.Float32x4.store(out, 12, minor3);\n  return out;\n};\n\n/**\n * Calculates the adjugate of a mat4 using SIMD if available and enabled\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\n mat4.adjoint = glMatrix.USE_SIMD ? mat4.SIMD.adjoint : mat4.scalar.adjoint;\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nmat4.determinant = function (a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n};\n\n/**\n * Multiplies two mat4's explicitly using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand, must be a Float32Array\n * @param {mat4} b the second operand, must be a Float32Array\n * @returns {mat4} out\n */\nmat4.SIMD.multiply = function (out, a, b) {\n    var a0 = SIMD.Float32x4.load(a, 0);\n    var a1 = SIMD.Float32x4.load(a, 4);\n    var a2 = SIMD.Float32x4.load(a, 8);\n    var a3 = SIMD.Float32x4.load(a, 12);\n\n    var b0 = SIMD.Float32x4.load(b, 0);\n    var out0 = SIMD.Float32x4.add(\n                   SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0, 0, 0, 0, 0), a0),\n                   SIMD.Float32x4.add(\n                       SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0, 1, 1, 1, 1), a1),\n                       SIMD.Float32x4.add(\n                           SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0, 2, 2, 2, 2), a2),\n                           SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0, 3, 3, 3, 3), a3))));\n    SIMD.Float32x4.store(out, 0, out0);\n\n    var b1 = SIMD.Float32x4.load(b, 4);\n    var out1 = SIMD.Float32x4.add(\n                   SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1, 0, 0, 0, 0), a0),\n                   SIMD.Float32x4.add(\n                       SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1, 1, 1, 1, 1), a1),\n                       SIMD.Float32x4.add(\n                           SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1, 2, 2, 2, 2), a2),\n                           SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1, 3, 3, 3, 3), a3))));\n    SIMD.Float32x4.store(out, 4, out1);\n\n    var b2 = SIMD.Float32x4.load(b, 8);\n    var out2 = SIMD.Float32x4.add(\n                   SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2, 0, 0, 0, 0), a0),\n                   SIMD.Float32x4.add(\n                       SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2, 1, 1, 1, 1), a1),\n                       SIMD.Float32x4.add(\n                               SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2, 2, 2, 2, 2), a2),\n                               SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2, 3, 3, 3, 3), a3))));\n    SIMD.Float32x4.store(out, 8, out2);\n\n    var b3 = SIMD.Float32x4.load(b, 12);\n    var out3 = SIMD.Float32x4.add(\n                   SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3, 0, 0, 0, 0), a0),\n                   SIMD.Float32x4.add(\n                        SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3, 1, 1, 1, 1), a1),\n                        SIMD.Float32x4.add(\n                            SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3, 2, 2, 2, 2), a2),\n                            SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3, 3, 3, 3, 3), a3))));\n    SIMD.Float32x4.store(out, 12, out3);\n\n    return out;\n};\n\n/**\n * Multiplies two mat4's explicitly not using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nmat4.scalar.multiply = function (out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};\n\n/**\n * Multiplies two mat4's using SIMD if available and enabled\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nmat4.multiply = glMatrix.USE_SIMD ? mat4.SIMD.multiply : mat4.scalar.multiply;\n\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nmat4.mul = mat4.multiply;\n\n/**\n * Translate a mat4 by the given vector not using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nmat4.scalar.translate = function (out, a, v) {\n    var x = v[0], y = v[1], z = v[2],\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n        a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n        a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n        out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n        out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n        out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n};\n\n/**\n * Translates a mat4 by the given vector using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nmat4.SIMD.translate = function (out, a, v) {\n    var a0 = SIMD.Float32x4.load(a, 0),\n        a1 = SIMD.Float32x4.load(a, 4),\n        a2 = SIMD.Float32x4.load(a, 8),\n        a3 = SIMD.Float32x4.load(a, 12),\n        vec = SIMD.Float32x4(v[0], v[1], v[2] , 0);\n\n    if (a !== out) {\n        out[0] = a[0]; out[1] = a[1]; out[2] = a[2]; out[3] = a[3];\n        out[4] = a[4]; out[5] = a[5]; out[6] = a[6]; out[7] = a[7];\n        out[8] = a[8]; out[9] = a[9]; out[10] = a[10]; out[11] = a[11];\n    }\n\n    a0 = SIMD.Float32x4.mul(a0, SIMD.Float32x4.swizzle(vec, 0, 0, 0, 0));\n    a1 = SIMD.Float32x4.mul(a1, SIMD.Float32x4.swizzle(vec, 1, 1, 1, 1));\n    a2 = SIMD.Float32x4.mul(a2, SIMD.Float32x4.swizzle(vec, 2, 2, 2, 2));\n\n    var t0 = SIMD.Float32x4.add(a0, SIMD.Float32x4.add(a1, SIMD.Float32x4.add(a2, a3)));\n    SIMD.Float32x4.store(out, 12, t0);\n\n    return out;\n};\n\n/**\n * Translates a mat4 by the given vector using SIMD if available and enabled\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nmat4.translate = glMatrix.USE_SIMD ? mat4.SIMD.translate : mat4.scalar.translate;\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nmat4.scalar.scale = function(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nmat4.SIMD.scale = function(out, a, v) {\n    var a0, a1, a2;\n    var vec = SIMD.Float32x4(v[0], v[1], v[2], 0);\n\n    a0 = SIMD.Float32x4.load(a, 0);\n    SIMD.Float32x4.store(\n        out, 0, SIMD.Float32x4.mul(a0, SIMD.Float32x4.swizzle(vec, 0, 0, 0, 0)));\n\n    a1 = SIMD.Float32x4.load(a, 4);\n    SIMD.Float32x4.store(\n        out, 4, SIMD.Float32x4.mul(a1, SIMD.Float32x4.swizzle(vec, 1, 1, 1, 1)));\n\n    a2 = SIMD.Float32x4.load(a, 8);\n    SIMD.Float32x4.store(\n        out, 8, SIMD.Float32x4.mul(a2, SIMD.Float32x4.swizzle(vec, 2, 2, 2, 2)));\n\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 using SIMD if available and enabled\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n */\nmat4.scale = glMatrix.USE_SIMD ? mat4.SIMD.scale : mat4.scalar.scale;\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nmat4.rotate = function (out, a, rad, axis) {\n    var x = axis[0], y = axis[1], z = axis[2],\n        len = Math.sqrt(x * x + y * y + z * z),\n        s, c, t,\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23,\n        b00, b01, b02,\n        b10, b11, b12,\n        b20, b21, b22;\n\n    if (Math.abs(len) < glMatrix.EPSILON) { return null; }\n\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n    a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n    a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the X axis not using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.scalar.rotateX = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[0]  = a[0];\n        out[1]  = a[1];\n        out[2]  = a[2];\n        out[3]  = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the X axis using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.SIMD.rotateX = function (out, a, rad) {\n    var s = SIMD.Float32x4.splat(Math.sin(rad)),\n        c = SIMD.Float32x4.splat(Math.cos(rad));\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n      out[0]  = a[0];\n      out[1]  = a[1];\n      out[2]  = a[2];\n      out[3]  = a[3];\n      out[12] = a[12];\n      out[13] = a[13];\n      out[14] = a[14];\n      out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    var a_1 = SIMD.Float32x4.load(a, 4);\n    var a_2 = SIMD.Float32x4.load(a, 8);\n    SIMD.Float32x4.store(out, 4,\n                         SIMD.Float32x4.add(SIMD.Float32x4.mul(a_1, c), SIMD.Float32x4.mul(a_2, s)));\n    SIMD.Float32x4.store(out, 8,\n                         SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_2, c), SIMD.Float32x4.mul(a_1, s)));\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the X axis using SIMD if availabe and enabled\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateX = glMatrix.USE_SIMD ? mat4.SIMD.rotateX : mat4.scalar.rotateX;\n\n/**\n * Rotates a matrix by the given angle around the Y axis not using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.scalar.rotateY = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[4]  = a[4];\n        out[5]  = a[5];\n        out[6]  = a[6];\n        out[7]  = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Y axis using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.SIMD.rotateY = function (out, a, rad) {\n    var s = SIMD.Float32x4.splat(Math.sin(rad)),\n        c = SIMD.Float32x4.splat(Math.cos(rad));\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[4]  = a[4];\n        out[5]  = a[5];\n        out[6]  = a[6];\n        out[7]  = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    var a_0 = SIMD.Float32x4.load(a, 0);\n    var a_2 = SIMD.Float32x4.load(a, 8);\n    SIMD.Float32x4.store(out, 0,\n                         SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_0, c), SIMD.Float32x4.mul(a_2, s)));\n    SIMD.Float32x4.store(out, 8,\n                         SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0, s), SIMD.Float32x4.mul(a_2, c)));\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Y axis if SIMD available and enabled\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n mat4.rotateY = glMatrix.USE_SIMD ? mat4.SIMD.rotateY : mat4.scalar.rotateY;\n\n/**\n * Rotates a matrix by the given angle around the Z axis not using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.scalar.rotateZ = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[8]  = a[8];\n        out[9]  = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Z axis using SIMD\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.SIMD.rotateZ = function (out, a, rad) {\n    var s = SIMD.Float32x4.splat(Math.sin(rad)),\n        c = SIMD.Float32x4.splat(Math.cos(rad));\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[8]  = a[8];\n        out[9]  = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    var a_0 = SIMD.Float32x4.load(a, 0);\n    var a_1 = SIMD.Float32x4.load(a, 4);\n    SIMD.Float32x4.store(out, 0,\n                         SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0, c), SIMD.Float32x4.mul(a_1, s)));\n    SIMD.Float32x4.store(out, 4,\n                         SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_1, c), SIMD.Float32x4.mul(a_0, s)));\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Z axis if SIMD available and enabled\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n mat4.rotateZ = glMatrix.USE_SIMD ? mat4.SIMD.rotateZ : mat4.scalar.rotateZ;\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nmat4.fromTranslation = function(out, v) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Scaling vector\n * @returns {mat4} out\n */\nmat4.fromScaling = function(out, v) {\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = v[1];\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = v[2];\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nmat4.fromRotation = function(out, rad, axis) {\n    var x = axis[0], y = axis[1], z = axis[2],\n        len = Math.sqrt(x * x + y * y + z * z),\n        s, c, t;\n\n    if (Math.abs(len) < glMatrix.EPSILON) { return null; }\n\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = x * x * t + c;\n    out[1] = y * x * t + z * s;\n    out[2] = z * x * t - y * s;\n    out[3] = 0;\n    out[4] = x * y * t - z * s;\n    out[5] = y * y * t + c;\n    out[6] = z * y * t + x * s;\n    out[7] = 0;\n    out[8] = x * z * t + y * s;\n    out[9] = y * z * t - x * s;\n    out[10] = z * z * t + c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.fromXRotation = function(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    // Perform axis-specific matrix multiplication\n    out[0]  = 1;\n    out[1]  = 0;\n    out[2]  = 0;\n    out[3]  = 0;\n    out[4] = 0;\n    out[5] = c;\n    out[6] = s;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = -s;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.fromYRotation = function(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    // Perform axis-specific matrix multiplication\n    out[0]  = c;\n    out[1]  = 0;\n    out[2]  = -s;\n    out[3]  = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = s;\n    out[9] = 0;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.fromZRotation = function(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    // Perform axis-specific matrix multiplication\n    out[0]  = c;\n    out[1]  = s;\n    out[2]  = 0;\n    out[3]  = 0;\n    out[4] = -s;\n    out[5] = c;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nmat4.fromRotationTranslation = function (out, q, v) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nmat4.getTranslation = function (out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n\n  return out;\n};\n\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be \n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nmat4.getScaling = function (out, mat) {\n  var m11 = mat[0],\n      m12 = mat[1],\n      m13 = mat[2],\n      m21 = mat[4],\n      m22 = mat[5],\n      m23 = mat[6],\n      m31 = mat[8],\n      m32 = mat[9],\n      m33 = mat[10];\n\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n\n  return out;\n};\n\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {mat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nmat4.getRotation = function (out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) { \n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S; \n    out[2] = (mat[1] - mat[4]) / S; \n  } else if ((mat[0] > mat[5])&(mat[0] > mat[10])) { \n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S; \n    out[2] = (mat[8] + mat[2]) / S; \n  } else if (mat[5] > mat[10]) { \n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S; \n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S; \n  } else { \n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n};\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @returns {mat4} out\n */\nmat4.fromRotationTranslationScale = function (out, q, v, s) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2,\n        sx = s[0],\n        sy = s[1],\n        sz = s[2];\n\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @param {vec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nmat4.fromRotationTranslationScaleOrigin = function (out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0], y = q[1], z = q[2], w = q[3],\n      x2 = x + x,\n      y2 = y + y,\n      z2 = z + z,\n\n      xx = x * x2,\n      xy = x * y2,\n      xz = x * z2,\n      yy = y * y2,\n      yz = y * z2,\n      zz = z * z2,\n      wx = w * x2,\n      wy = w * y2,\n      wz = w * z2,\n\n      sx = s[0],\n      sy = s[1],\n      sz = s[2],\n\n      ox = o[0],\n      oy = o[1],\n      oz = o[2];\n\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out[0] * ox + out[4] * oy + out[8] * oz);\n  out[13] = v[1] + oy - (out[1] * ox + out[5] * oy + out[9] * oz);\n  out[14] = v[2] + oz - (out[2] * ox + out[6] * oy + out[10] * oz);\n  out[15] = 1;\n\n  return out;\n};\n\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nmat4.fromQuat = function (out, q) {\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.frustum = function (out, left, right, bottom, top, near, far) {\n    var rl = 1 / (right - left),\n        tb = 1 / (top - bottom),\n        nf = 1 / (near - far);\n    out[0] = (near * 2) * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = (near * 2) * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (far * near * 2) * nf;\n    out[15] = 0;\n    return out;\n};\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.perspective = function (out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};\n\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.perspectiveFromFieldOfView = function (out, fov, near, far) {\n    var upTan = Math.tan(fov.upDegrees * Math.PI/180.0),\n        downTan = Math.tan(fov.downDegrees * Math.PI/180.0),\n        leftTan = Math.tan(fov.leftDegrees * Math.PI/180.0),\n        rightTan = Math.tan(fov.rightDegrees * Math.PI/180.0),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = ((upTan - downTan) * yScale * 0.5);\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = (far * near) / (near - far);\n    out[15] = 0.0;\n    return out;\n}\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.ortho = function (out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right),\n        bt = 1 / (bottom - top),\n        nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nmat4.lookAt = function (out, eye, center, up) {\n    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len,\n        eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2],\n        centerx = center[0],\n        centery = center[1],\n        centerz = center[2];\n\n    if (Math.abs(eyex - centerx) < glMatrix.EPSILON &&\n        Math.abs(eyey - centery) < glMatrix.EPSILON &&\n        Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n        return mat4.identity(out);\n    }\n\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    } else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    } else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Returns a string representation of a mat4\n *\n * @param {mat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nmat4.str = function (a) {\n    return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' +\n                    a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' +\n                    a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' +\n                    a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n};\n\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {mat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat4.frob = function (a) {\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2) ))\n};\n\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nmat4.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    out[4] = a[4] + b[4];\n    out[5] = a[5] + b[5];\n    out[6] = a[6] + b[6];\n    out[7] = a[7] + b[7];\n    out[8] = a[8] + b[8];\n    out[9] = a[9] + b[9];\n    out[10] = a[10] + b[10];\n    out[11] = a[11] + b[11];\n    out[12] = a[12] + b[12];\n    out[13] = a[13] + b[13];\n    out[14] = a[14] + b[14];\n    out[15] = a[15] + b[15];\n    return out;\n};\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nmat4.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    out[4] = a[4] - b[4];\n    out[5] = a[5] - b[5];\n    out[6] = a[6] - b[6];\n    out[7] = a[7] - b[7];\n    out[8] = a[8] - b[8];\n    out[9] = a[9] - b[9];\n    out[10] = a[10] - b[10];\n    out[11] = a[11] - b[11];\n    out[12] = a[12] - b[12];\n    out[13] = a[13] - b[13];\n    out[14] = a[14] - b[14];\n    out[15] = a[15] - b[15];\n    return out;\n};\n\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\nmat4.sub = mat4.subtract;\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nmat4.multiplyScalar = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    out[4] = a[4] * b;\n    out[5] = a[5] * b;\n    out[6] = a[6] * b;\n    out[7] = a[7] * b;\n    out[8] = a[8] * b;\n    out[9] = a[9] * b;\n    out[10] = a[10] * b;\n    out[11] = a[11] * b;\n    out[12] = a[12] * b;\n    out[13] = a[13] * b;\n    out[14] = a[14] * b;\n    out[15] = a[15] * b;\n    return out;\n};\n\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\nmat4.multiplyScalarAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    out[2] = a[2] + (b[2] * scale);\n    out[3] = a[3] + (b[3] * scale);\n    out[4] = a[4] + (b[4] * scale);\n    out[5] = a[5] + (b[5] * scale);\n    out[6] = a[6] + (b[6] * scale);\n    out[7] = a[7] + (b[7] * scale);\n    out[8] = a[8] + (b[8] * scale);\n    out[9] = a[9] + (b[9] * scale);\n    out[10] = a[10] + (b[10] * scale);\n    out[11] = a[11] + (b[11] * scale);\n    out[12] = a[12] + (b[12] * scale);\n    out[13] = a[13] + (b[13] * scale);\n    out[14] = a[14] + (b[14] * scale);\n    out[15] = a[15] + (b[15] * scale);\n    return out;\n};\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat4} a The first matrix.\n * @param {mat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nmat4.exactEquals = function (a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && \n           a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && \n           a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] &&\n           a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n};\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat4} a The first matrix.\n * @param {mat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nmat4.equals = function (a, b) {\n    var a0  = a[0],  a1  = a[1],  a2  = a[2],  a3  = a[3],\n        a4  = a[4],  a5  = a[5],  a6  = a[6],  a7  = a[7], \n        a8  = a[8],  a9  = a[9],  a10 = a[10], a11 = a[11], \n        a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];\n\n    var b0  = b[0],  b1  = b[1],  b2  = b[2],  b3  = b[3],\n        b4  = b[4],  b5  = b[5],  b6  = b[6],  b7  = b[7], \n        b8  = b[8],  b9  = b[9],  b10 = b[10], b11 = b[11], \n        b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];\n\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n            Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n            Math.abs(a4 - b4) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n            Math.abs(a5 - b5) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n            Math.abs(a6 - b6) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n            Math.abs(a7 - b7) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n            Math.abs(a8 - b8) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a8), Math.abs(b8)) &&\n            Math.abs(a9 - b9) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a9), Math.abs(b9)) &&\n            Math.abs(a10 - b10) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a10), Math.abs(b10)) &&\n            Math.abs(a11 - b11) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a11), Math.abs(b11)) &&\n            Math.abs(a12 - b12) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a12), Math.abs(b12)) &&\n            Math.abs(a13 - b13) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a13), Math.abs(b13)) &&\n            Math.abs(a14 - b14) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a14), Math.abs(b14)) &&\n            Math.abs(a15 - b15) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a15), Math.abs(b15)));\n};\n\n\n\nmodule.exports = mat4;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/glMatrix-mat4.js","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\n/**\n * @class Common utilities\n * @name glMatrix\n */\nvar glMatrix = {};\n\n// Configuration Constants\nglMatrix.EPSILON = 0.000001;\nglMatrix.ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\nglMatrix.RANDOM = Math.random;\nglMatrix.ENABLE_SIMD = false;\n\nvar self = this || window || global;\n\n// Capability detection\nglMatrix.SIMD_AVAILABLE = (glMatrix.ARRAY_TYPE === self.Float32Array) && ('SIMD' in self);\nglMatrix.USE_SIMD = glMatrix.ENABLE_SIMD && glMatrix.SIMD_AVAILABLE;\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Type} type Array type, such as Float32Array or Array\n */\nglMatrix.setMatrixArrayType = function(type) {\n    glMatrix.ARRAY_TYPE = type;\n}\n\nvar degree = Math.PI / 180;\n\n/**\n* Convert Degree To Radian\n*\n* @param {Number} a Angle in Degrees\n*/\nglMatrix.toRadian = function(a){\n     return a * degree;\n}\n\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less \n * than or equal to 1.0, and a relative tolerance is used for larger values)\n * \n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nglMatrix.equals = function(a, b) {\n\treturn Math.abs(a - b) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a), Math.abs(b));\n}\n\nmodule.exports = glMatrix;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/glMatrix-common.js","export default function ModelSettingJson(json)\r\n{\r\n    this.NAME = \"name\";\r\n    this.ID = \"id\";\r\n    this.MODEL = \"model\";\r\n    this.TEXTURES = \"textures\";\r\n    this.HIT_AREAS = \"hit_areas\";\r\n    this.PHYSICS = \"physics\";\r\n    this.POSE = \"pose\";\r\n    this.EXPRESSIONS = \"expressions\";\r\n    this.MOTION_GROUPS = \"motions\";\r\n    this.SOUND = \"sound\";\r\n    this.FADE_IN = \"fade_in\";\r\n    this.FADE_OUT = \"fade_out\";\r\n    this.LAYOUT = \"layout\";\r\n    this.INIT_PARAM = \"init_param\";\r\n    this.INIT_PARTS_VISIBLE = \"init_parts_visible\";\r\n    this.VALUE = \"val\";\r\n    this.FILE = \"file\";\r\n\r\n    this.json = json || {};\r\n}\r\n\r\n\r\n// ModelSettingJson.prototype.loadModelSetting = function(path, callback)\r\n// {\r\n//     var thisRef = this;\r\n//     var pm = Live2DFramework.getPlatformManager();\r\n//     pm.loadBytes(path, function(buf) {\r\n//         var str = String.fromCharCode.apply(null,new Uint8Array(buf));\r\n//         thisRef.json = JSON.parse(str);\r\n//         callback();\r\n//     });\r\n// };\r\n\r\n\r\nModelSettingJson.prototype.getTextureFile = function(n)\r\n{\r\n    if (this.json[this.TEXTURES] == null || this.json[this.TEXTURES][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.TEXTURES][n];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getModelFile = function()\r\n{\r\n    return this.json[this.MODEL];\r\n};\r\n\r\n\r\nModelSettingJson.prototype.getTextureNum = function()\r\n{\r\n    if (this.json[this.TEXTURES] == null) return 0;\r\n\r\n    return this.json[this.TEXTURES].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getHitAreaNum = function()\r\n{\r\n    if (this.json[this.HIT_AREAS] == null)\r\n        return 0;\r\n\r\n    return this.json[this.HIT_AREAS].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getHitAreaID = function(n)\r\n{\r\n    if (this.json[this.HIT_AREAS] == null ||\r\n        this.json[this.HIT_AREAS][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.HIT_AREAS][n][this.ID];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getHitAreaName = function(n)\r\n{\r\n    if (this.json[this.HIT_AREAS] == null ||\r\n        this.json[this.HIT_AREAS][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.HIT_AREAS][n][this.NAME];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getPhysicsFile = function()\r\n{\r\n    return this.json[this.PHYSICS];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getPoseFile = function()\r\n{\r\n    return this.json[this.POSE];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getExpressionNum = function()\r\n{\r\n    return (this.json[this.EXPRESSIONS] == null) ? 0 : this.json[this.EXPRESSIONS].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getExpressionFile = function(n)\r\n{\r\n    if (this.json[this.EXPRESSIONS] == null)\r\n        return null;\r\n    return this.json[this.EXPRESSIONS][n][this.FILE];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getExpressionName = function(n)\r\n{\r\n    if (this.json[this.EXPRESSIONS] == null)\r\n        return null;\r\n    return this.json[this.EXPRESSIONS][n][this.NAME];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getLayout = function()\r\n{\r\n    return this.json[this.LAYOUT];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitParamNum = function()\r\n{\r\n    return (this.json[this.INIT_PARAM] == null) ? 0 : this.json[this.INIT_PARAM].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionNum = function(name)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null)\r\n        return 0;\r\n\r\n    return this.json[this.MOTION_GROUPS][name].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionFile = function(name, n)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.MOTION_GROUPS][name][n][this.FILE];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionSound = function(name, n)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n][this.SOUND] == null)\r\n        return null;\r\n\r\n    return this.json[this.MOTION_GROUPS][name][n][this.SOUND];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionFadeIn = function(name, n)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n][this.FADE_IN] == null)\r\n        return 1000;\r\n\r\n    return this.json[this.MOTION_GROUPS][name][n][this.FADE_IN];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionFadeOut = function(name, n)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n][this.FADE_OUT] == null)\r\n        return 1000;\r\n\r\n    return this.json[this.MOTION_GROUPS][name][n][this.FADE_OUT];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitParamID = function(n)\r\n{\r\n    if (this.json[this.INIT_PARAM] == null ||\r\n        this.json[this.INIT_PARAM][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.INIT_PARAM][n][this.ID];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitParamValue = function(n)\r\n{\r\n    if (this.json[this.INIT_PARAM] == null || this.json[this.INIT_PARAM][n] == null)\r\n        return NaN;\r\n\r\n    return this.json[this.INIT_PARAM][n][this.VALUE];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitPartsVisibleNum = function()\r\n{\r\n    return (this.json[this.INIT_PARTS_VISIBLE] == null) ? 0 : this.json[this.INIT_PARTS_VISIBLE].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitPartsVisibleID = function(n)\r\n{\r\n    if (this.json[this.INIT_PARTS_VISIBLE] == null || this.json[this.INIT_PARTS_VISIBLE][n] == null)\r\n        return null;\r\n    return this.json[this.INIT_PARTS_VISIBLE][n][this.ID];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitPartsVisibleValue = function(n)\r\n{\r\n    if (this.json[this.INIT_PARTS_VISIBLE] == null || this.json[this.INIT_PARTS_VISIBLE][n] == null)\r\n        return NaN;\r\n\r\n    return this.json[this.INIT_PARTS_VISIBLE][n][this.VALUE];\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ModelSettingJson.js","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pixi.js\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}